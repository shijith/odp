<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>API Reference Manual: odp_sched_perf.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="odpdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="ODP-Logo-HQ.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">API Reference Manual
   &#160;<span id="projectnumber">1.45.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('odp_sched_perf_8c-example.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">odp_sched_perf.c</div>  </div>
</div><!--header-->
<div class="contents">
<p>Performance test application for scheduling</p>
<div class="fragment"><div class="line"><span class="comment">/* SPDX-License-Identifier: BSD-3-Clause</span></div>
<div class="line"><span class="comment"> * Copyright (c) 2018 Linaro Limited</span></div>
<div class="line"><span class="comment"> * Copyright (c) 2020-2024 Nokia</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifndef _GNU_SOURCE</span></div>
<div class="line"><span class="preprocessor">#define _GNU_SOURCE </span><span class="comment">/* Needed for sigaction */</span><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;signal.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdint.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;inttypes.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;getopt.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="odp__api_8h.html">odp_api.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;odp/helper/odph_api.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define MAX_QUEUES  (256 * 1024)</span></div>
<div class="line"><span class="preprocessor">#define MAX_GROUPS  256</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Limit data values to 16 bits. Large data values are costly on square root calculation. */</span></div>
<div class="line"><span class="preprocessor">#define DATA_MASK   0xffff</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Max time to wait for new events in nanoseconds */</span></div>
<div class="line"><span class="preprocessor">#define MAX_SCHED_WAIT_NS (10 * ODP_TIME_SEC_IN_NS)</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Scheduling round interval to check for MAX_SCHED_WAIT_NS */</span></div>
<div class="line"><span class="preprocessor">#define TIME_CHECK_INTERVAL  (1024 * 1024)</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Round up &#39;X&#39; to a multiple of &#39;NUM&#39; */</span></div>
<div class="line"><span class="preprocessor">#define ROUNDUP(X, NUM) ((NUM) * (((X) + (NUM) - 1) / (NUM)))</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>test_options_t {</div>
<div class="line">    uint32_t num_cpu;</div>
<div class="line">    uint32_t num_queue;</div>
<div class="line">    uint32_t num_low;</div>
<div class="line">    uint32_t num_high;</div>
<div class="line">    uint32_t num_dummy;</div>
<div class="line">    uint32_t num_event;</div>
<div class="line">    uint32_t num_sched;</div>
<div class="line">    <span class="keywordtype">int</span>      num_group;</div>
<div class="line">    uint32_t num_join;</div>
<div class="line">    uint32_t max_burst;</div>
<div class="line">    <a class="code" href="group__odp__pool.html#gac47bb33bcde80614b4b358578eaa3082">odp_pool_type_t</a> pool_type;</div>
<div class="line">    <span class="keywordtype">int</span>      queue_type;</div>
<div class="line">    <span class="keywordtype">int</span>      forward;</div>
<div class="line">    <span class="keywordtype">int</span>      fairness;</div>
<div class="line">    uint32_t event_size;</div>
<div class="line">    uint32_t queue_size;</div>
<div class="line">    uint32_t tot_queue;</div>
<div class="line">    uint32_t tot_event;</div>
<div class="line">    <span class="keywordtype">int</span>      touch_data;</div>
<div class="line">    uint32_t stress;</div>
<div class="line">    uint32_t rd_words;</div>
<div class="line">    uint32_t rw_words;</div>
<div class="line">    uint32_t ctx_size;</div>
<div class="line">    uint32_t ctx_rd_words;</div>
<div class="line">    uint32_t ctx_rw_words;</div>
<div class="line">    uint32_t uarea_rd;</div>
<div class="line">    uint32_t uarea_rw;</div>
<div class="line">    uint32_t uarea_size;</div>
<div class="line">    uint64_t wait_ns;</div>
<div class="line">    <span class="keywordtype">int</span>      verbose;</div>
<div class="line"> </div>
<div class="line">} test_options_t;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>test_stat_t {</div>
<div class="line">    uint64_t rounds;</div>
<div class="line">    uint64_t enqueues;</div>
<div class="line">    uint64_t events;</div>
<div class="line">    uint64_t nsec;</div>
<div class="line">    uint64_t cycles;</div>
<div class="line">    uint64_t waits;</div>
<div class="line">    uint64_t dummy_sum;</div>
<div class="line">    uint8_t  failed;</div>
<div class="line"> </div>
<div class="line">} test_stat_t;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>thread_arg_t {</div>
<div class="line">    <span class="keywordtype">void</span> *global;</div>
<div class="line">    <span class="keywordtype">int</span> first_group;</div>
<div class="line"> </div>
<div class="line">} thread_arg_t;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>test_global_t {</div>
<div class="line">    test_options_t test_options;</div>
<div class="line">    <a name="_a0"></a><a class="code" href="structodp__schedule__config__t.html">odp_schedule_config_t</a> schedule_config;</div>
<div class="line">    <a name="_a1"></a><a class="code" href="structodp__barrier__s.html">odp_barrier_t</a> barrier;</div>
<div class="line">    <a name="_a2"></a><a class="code" href="struct__odp__abi__pool__t.html">odp_pool_t</a> pool;</div>
<div class="line">    <a name="_a3"></a><a class="code" href="structodp__cpumask__t.html">odp_cpumask_t</a> cpumask;</div>
<div class="line">    <a name="_a4"></a><a class="code" href="struct__odp__abi__shm__t.html">odp_shm_t</a> ctx_shm;</div>
<div class="line">    <a name="_a5"></a><a class="code" href="struct__odp__abi__queue__t.html">odp_queue_t</a> queue[MAX_QUEUES];</div>
<div class="line">    <a class="code" href="group__odp__scheduler.html#ga3cd27b316530d297eab83d851bf2deb8">odp_schedule_group_t</a> group[MAX_GROUPS];</div>
<div class="line">    odph_thread_t thread_tbl[<a name="a6"></a><a class="code" href="group__odp__thread.html#ga0c7b70f32643b51e1ea09352183c50bf">ODP_THREAD_COUNT_MAX</a>];</div>
<div class="line">    test_stat_t stat[<a class="code" href="group__odp__thread.html#ga0c7b70f32643b51e1ea09352183c50bf">ODP_THREAD_COUNT_MAX</a>];</div>
<div class="line">    thread_arg_t thread_arg[<a class="code" href="group__odp__thread.html#ga0c7b70f32643b51e1ea09352183c50bf">ODP_THREAD_COUNT_MAX</a>];</div>
<div class="line">    <a name="_a7"></a><a class="code" href="structodp__atomic__u32__s.html">odp_atomic_u32_t</a> num_worker;</div>
<div class="line">    <a class="code" href="structodp__atomic__u32__s.html">odp_atomic_u32_t</a> exit_threads;</div>
<div class="line"> </div>
<div class="line">} test_global_t;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line">    <a class="code" href="struct__odp__abi__queue__t.html">odp_queue_t</a> next;</div>
<div class="line">    <a name="_a8"></a><a class="code" href="structodp__atomic__u64__s.html">odp_atomic_u64_t</a> count;</div>
<div class="line">} queue_context_t;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> test_global_t *test_globals;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> sig_handler(<span class="keywordtype">int</span> signum <a name="a9"></a><a class="code" href="group__odp__compiler__optim.html#ga45a2684e38da3e71b300bc89de5d6b52">ODP_UNUSED</a>)</div>
<div class="line">{</div>
<div class="line">    <a name="a10"></a><a class="code" href="group__odp__atomic.html#gaa6d2d16a9ef9897b1442d77e41f7101e">odp_atomic_store_u32</a>(&amp;test_globals-&gt;exit_threads, 1);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> setup_sig_handler(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>sigaction action = { .sa_handler = sig_handler };</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (sigemptyset(&amp;action.sa_mask) || sigaction(SIGINT, &amp;action, NULL))</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> print_usage(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    printf(<span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;Scheduler performance test\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;Usage: odp_sched_perf [options]\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -c, --num_cpu          Number of CPUs (worker threads). 0: all available CPUs. Default: 1.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -q, --num_queue        Number of queues. Default: 1.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -L, --num_low          Number of lowest priority queues out of &#39;--num_queue&#39; queues. Rest of\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                         the queues are default (or highest) priority. Default: 0.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -H, --num_high         Number of highest priority queues out of &#39;--num_queue&#39; queues. Rest of\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                         the queues are default (or lowest) priority. Default: 0.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -d, --num_dummy        Number of empty queues. Default: 0.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -e, --num_event        Number of events per queue. Default: 100.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -s, --num_sched        Number of events to schedule per thread. If zero, the application runs\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                         until SIGINT is received. Default: 100 000.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -g, --num_group        Number of schedule groups. Round robins threads and queues into groups.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                         -1: SCHED_GROUP_WORKER\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                         0:  SCHED_GROUP_ALL (default)\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -j, --num_join         Number of groups a thread joins. Threads are divide evenly into groups,\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                         if num_cpu is multiple of num_group and num_group is multiple of num_join.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                         0: join all groups (default)\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -b, --burst            Maximum number of events per operation. Default: 100.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -t, --type             Queue type. 0: parallel, 1: atomic, 2: ordered. Default: 0.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -f, --forward          0: Keep event in the original queue, 1: Forward event to the next queue. Default: 0.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -F, --fairness         0: Don&#39;t count events per queue, 1: Count and report events relative to average. Default: 0.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -w, --wait_ns          Number of nsec to wait before enqueueing events. Default: 0.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -S, --stress           CPU stress function(s) to be called for each event data word (requires -n or -m).\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                         Data is processed as uint32_t words. Multiple flags may be selected.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                         0:   No extra data processing (default)\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                         0x1: Calculate square of each uint32_t\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                         0x2: Calculate log2 of each uint32_t\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                         0x4: Calculate square root of each uint32_t\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;                         0x8: Calculate square root of each uint32_t in floating point\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -k, --ctx_rd_words     Number of queue context words (uint64_t) to read on every event. Default: 0.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -l, --ctx_rw_words     Number of queue context words (uint64_t) to modify on every event. Default: 0.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -n, --rd_words         Number of event data words (uint64_t) to read before enqueueing it. Default: 0.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -m, --rw_words         Number of event data words (uint64_t) to modify before enqueueing it. Default: 0.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -u, --uarea_rd         Number of user area words (uint64_t) to read on every event. Default: 0.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -U, --uarea_rw         Number of user area words (uint64_t) to modify on every event. Default: 0.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -p, --pool_type        Pool type. 0: buffer, 1: packet. Default: 0.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -v, --verbose          Verbose output.\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;  -h, --help             This help\n&quot;</span></div>
<div class="line">           <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> parse_options(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[], test_options_t *test_options)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> opt, long_index, num_group, num_join;</div>
<div class="line">    <span class="keywordtype">int</span> ret = 0;</div>
<div class="line">    uint32_t ctx_size = 0;</div>
<div class="line">    <span class="keywordtype">int</span> pool_type = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">struct </span>option longopts[] = {</div>
<div class="line">        {<span class="stringliteral">&quot;num_cpu&quot;</span>,      required_argument, NULL, <span class="charliteral">&#39;c&#39;</span>},</div>
<div class="line">        {<span class="stringliteral">&quot;num_queue&quot;</span>,    required_argument, NULL, <span class="charliteral">&#39;q&#39;</span>},</div>
<div class="line">        {<span class="stringliteral">&quot;num_low&quot;</span>,      required_argument, NULL, <span class="charliteral">&#39;L&#39;</span>},</div>
<div class="line">        {<span class="stringliteral">&quot;num_high&quot;</span>,     required_argument, NULL, <span class="charliteral">&#39;H&#39;</span>},</div>
<div class="line">        {<span class="stringliteral">&quot;num_dummy&quot;</span>,    required_argument, NULL, <span class="charliteral">&#39;d&#39;</span>},</div>
<div class="line">        {<span class="stringliteral">&quot;num_event&quot;</span>,    required_argument, NULL, <span class="charliteral">&#39;e&#39;</span>},</div>
<div class="line">        {<span class="stringliteral">&quot;num_sched&quot;</span>,    required_argument, NULL, <span class="charliteral">&#39;s&#39;</span>},</div>
<div class="line">        {<span class="stringliteral">&quot;num_group&quot;</span>,    required_argument, NULL, <span class="charliteral">&#39;g&#39;</span>},</div>
<div class="line">        {<span class="stringliteral">&quot;num_join&quot;</span>,     required_argument, NULL, <span class="charliteral">&#39;j&#39;</span>},</div>
<div class="line">        {<span class="stringliteral">&quot;burst&quot;</span>,        required_argument, NULL, <span class="charliteral">&#39;b&#39;</span>},</div>
<div class="line">        {<span class="stringliteral">&quot;type&quot;</span>,         required_argument, NULL, <span class="charliteral">&#39;t&#39;</span>},</div>
<div class="line">        {<span class="stringliteral">&quot;forward&quot;</span>,      required_argument, NULL, <span class="charliteral">&#39;f&#39;</span>},</div>
<div class="line">        {<span class="stringliteral">&quot;fairness&quot;</span>,     required_argument, NULL, <span class="charliteral">&#39;F&#39;</span>},</div>
<div class="line">        {<span class="stringliteral">&quot;wait_ns&quot;</span>,      required_argument, NULL, <span class="charliteral">&#39;w&#39;</span>},</div>
<div class="line">        {<span class="stringliteral">&quot;stress&quot;</span>,       required_argument, NULL, <span class="charliteral">&#39;S&#39;</span>},</div>
<div class="line">        {<span class="stringliteral">&quot;ctx_rd_words&quot;</span>, required_argument, NULL, <span class="charliteral">&#39;k&#39;</span>},</div>
<div class="line">        {<span class="stringliteral">&quot;ctx_rw_words&quot;</span>, required_argument, NULL, <span class="charliteral">&#39;l&#39;</span>},</div>
<div class="line">        {<span class="stringliteral">&quot;rd_words&quot;</span>,     required_argument, NULL, <span class="charliteral">&#39;n&#39;</span>},</div>
<div class="line">        {<span class="stringliteral">&quot;rw_words&quot;</span>,     required_argument, NULL, <span class="charliteral">&#39;m&#39;</span>},</div>
<div class="line">        {<span class="stringliteral">&quot;uarea_rd&quot;</span>,     required_argument, NULL, <span class="charliteral">&#39;u&#39;</span>},</div>
<div class="line">        {<span class="stringliteral">&quot;uarea_rw&quot;</span>,     required_argument, NULL, <span class="charliteral">&#39;U&#39;</span>},</div>
<div class="line">        {<span class="stringliteral">&quot;pool_type&quot;</span>,    required_argument, NULL, <span class="charliteral">&#39;p&#39;</span>},</div>
<div class="line">        {<span class="stringliteral">&quot;verbose&quot;</span>,      no_argument,       NULL, <span class="charliteral">&#39;v&#39;</span>},</div>
<div class="line">        {<span class="stringliteral">&quot;help&quot;</span>,         no_argument,       NULL, <span class="charliteral">&#39;h&#39;</span>},</div>
<div class="line">        {NULL, 0, NULL, 0}</div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *shortopts = <span class="stringliteral">&quot;+c:q:L:H:d:e:s:g:j:b:t:f:F:w:S:k:l:n:m:p:u:U:vh&quot;</span>;</div>
<div class="line"> </div>
<div class="line">    test_options-&gt;num_cpu    = 1;</div>
<div class="line">    test_options-&gt;num_queue  = 1;</div>
<div class="line">    test_options-&gt;num_low    = 0;</div>
<div class="line">    test_options-&gt;num_high   = 0;</div>
<div class="line">    test_options-&gt;num_dummy  = 0;</div>
<div class="line">    test_options-&gt;num_event  = 100;</div>
<div class="line">    test_options-&gt;num_sched  = 100000;</div>
<div class="line">    test_options-&gt;num_group  = 0;</div>
<div class="line">    test_options-&gt;num_join   = 0;</div>
<div class="line">    test_options-&gt;max_burst  = 100;</div>
<div class="line">    test_options-&gt;queue_type = 0;</div>
<div class="line">    test_options-&gt;forward    = 0;</div>
<div class="line">    test_options-&gt;fairness   = 0;</div>
<div class="line">    test_options-&gt;stress     = 0;</div>
<div class="line">    test_options-&gt;ctx_rd_words = 0;</div>
<div class="line">    test_options-&gt;ctx_rw_words = 0;</div>
<div class="line">    test_options-&gt;rd_words   = 0;</div>
<div class="line">    test_options-&gt;rw_words   = 0;</div>
<div class="line">    test_options-&gt;uarea_rd   = 0;</div>
<div class="line">    test_options-&gt;uarea_rw   = 0;</div>
<div class="line">    test_options-&gt;wait_ns    = 0;</div>
<div class="line">    test_options-&gt;verbose    = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (1) {</div>
<div class="line">        opt = getopt_long(argc, argv, shortopts, longopts, &amp;long_index);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (opt == -1)</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">switch</span> (opt) {</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;c&#39;</span>:</div>
<div class="line">            test_options-&gt;num_cpu = atoi(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;q&#39;</span>:</div>
<div class="line">            test_options-&gt;num_queue = atoi(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;L&#39;</span>:</div>
<div class="line">            test_options-&gt;num_low = atoi(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;H&#39;</span>:</div>
<div class="line">            test_options-&gt;num_high = atoi(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;d&#39;</span>:</div>
<div class="line">            test_options-&gt;num_dummy = atoi(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;e&#39;</span>:</div>
<div class="line">            test_options-&gt;num_event = atoi(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;s&#39;</span>:</div>
<div class="line">            test_options-&gt;num_sched = atoi(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;g&#39;</span>:</div>
<div class="line">            test_options-&gt;num_group = atoi(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;j&#39;</span>:</div>
<div class="line">            test_options-&gt;num_join = atoi(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;b&#39;</span>:</div>
<div class="line">            test_options-&gt;max_burst = atoi(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;t&#39;</span>:</div>
<div class="line">            test_options-&gt;queue_type = atoi(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;f&#39;</span>:</div>
<div class="line">            test_options-&gt;forward = atoi(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;F&#39;</span>:</div>
<div class="line">            test_options-&gt;fairness = atoi(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;S&#39;</span>:</div>
<div class="line">            test_options-&gt;stress = strtoul(optarg, NULL, 0);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;k&#39;</span>:</div>
<div class="line">            test_options-&gt;ctx_rd_words = atoi(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;l&#39;</span>:</div>
<div class="line">            test_options-&gt;ctx_rw_words = atoi(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;n&#39;</span>:</div>
<div class="line">            test_options-&gt;rd_words = atoi(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;m&#39;</span>:</div>
<div class="line">            test_options-&gt;rw_words = atoi(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;u&#39;</span>:</div>
<div class="line">            test_options-&gt;uarea_rd = atoi(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;U&#39;</span>:</div>
<div class="line">            test_options-&gt;uarea_rw = atoi(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;p&#39;</span>:</div>
<div class="line">            pool_type = atoi(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;w&#39;</span>:</div>
<div class="line">            test_options-&gt;wait_ns = atoll(optarg);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;v&#39;</span>:</div>
<div class="line">            test_options-&gt;verbose = 1;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <span class="charliteral">&#39;h&#39;</span>:</div>
<div class="line">            <span class="comment">/* fall through */</span></div>
<div class="line">        <span class="keywordflow">default</span>:</div>
<div class="line">            print_usage();</div>
<div class="line">            ret = -1;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (pool_type == 0) {</div>
<div class="line">        test_options-&gt;pool_type = <a name="a11"></a><a class="code" href="group__odp__pool.html#ggac47bb33bcde80614b4b358578eaa3082a5f851628c50a0c6a8ee896fd46767806">ODP_POOL_BUFFER</a>;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pool_type == 1) {</div>
<div class="line">        test_options-&gt;pool_type = <a name="a12"></a><a class="code" href="group__odp__pool.html#ggac47bb33bcde80614b4b358578eaa3082aa02b3a4e37094bd277b3dfe371450acd">ODP_POOL_PACKET</a>;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        ODPH_ERR(<span class="stringliteral">&quot;Invalid pool type: %d.\n&quot;</span>, pool_type);</div>
<div class="line">        ret = -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    test_options-&gt;touch_data = test_options-&gt;rd_words ||</div>
<div class="line">                   test_options-&gt;rw_words;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (test_options-&gt;stress &amp;&amp; test_options-&gt;touch_data == 0) {</div>
<div class="line">        ODPH_ERR(<span class="stringliteral">&quot;Use -n or/and -m to select event data size with a stress function\n&quot;</span>);</div>
<div class="line">        ret = -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> ((test_options-&gt;num_queue + test_options-&gt;num_dummy) &gt; MAX_QUEUES) {</div>
<div class="line">        ODPH_ERR(<span class="stringliteral">&quot;Too many queues. Max supported %i.\n&quot;</span>, MAX_QUEUES);</div>
<div class="line">        ret = -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> ((test_options-&gt;num_low + test_options-&gt;num_high) &gt; test_options-&gt;num_queue) {</div>
<div class="line">        ODPH_ERR(<span class="stringliteral">&quot;Number of low/high prio %u/%u exceed number of queues %u.\n&quot;</span>,</div>
<div class="line">             test_options-&gt;num_low, test_options-&gt;num_high, test_options-&gt;num_queue);</div>
<div class="line">        ret = -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    num_group = test_options-&gt;num_group;</div>
<div class="line">    num_join  = test_options-&gt;num_join;</div>
<div class="line">    <span class="keywordflow">if</span> (num_group &gt; MAX_GROUPS) {</div>
<div class="line">        ODPH_ERR(<span class="stringliteral">&quot;Too many groups. Max supported %i.\n&quot;</span>, MAX_GROUPS);</div>
<div class="line">        ret = -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (num_group &gt; 0 &amp;&amp; num_join &gt; num_group) {</div>
<div class="line">        ODPH_ERR(<span class="stringliteral">&quot;num_join (%i) larger than num_group (%i).\n&quot;</span>, num_join, num_group);</div>
<div class="line">        ret = -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (num_join &amp;&amp; num_group &gt; (<span class="keywordtype">int</span>)(test_options-&gt;num_cpu * num_join)) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;WARNING: Too many groups (%i). Some groups (%i) are not served.\n\n&quot;</span>,</div>
<div class="line">               num_group, num_group - (test_options-&gt;num_cpu * num_join));</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (test_options-&gt;forward) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;Error: Cannot forward when some queues are not served.\n&quot;</span>);</div>
<div class="line">            ret = -1;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    test_options-&gt;tot_queue = test_options-&gt;num_queue +</div>
<div class="line">                  test_options-&gt;num_dummy;</div>
<div class="line">    test_options-&gt;tot_event = test_options-&gt;num_queue *</div>
<div class="line">                  test_options-&gt;num_event;</div>
<div class="line"> </div>
<div class="line">    test_options-&gt;queue_size = test_options-&gt;num_event;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (test_options-&gt;forward) {</div>
<div class="line">        <span class="comment">/* When forwarding, all events may end up into</span></div>
<div class="line"><span class="comment">         * a single queue */</span></div>
<div class="line">        test_options-&gt;queue_size = test_options-&gt;tot_event;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (test_options-&gt;forward || test_options-&gt;fairness)</div>
<div class="line">        ctx_size = <span class="keyword">sizeof</span>(queue_context_t);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (test_options-&gt;ctx_rd_words || test_options-&gt;ctx_rw_words) {</div>
<div class="line">        <span class="comment">/* Round up queue handle size to a multiple of 8 for correct</span></div>
<div class="line"><span class="comment">         * context data alignment */</span></div>
<div class="line">        ctx_size = ROUNDUP(ctx_size, 8);</div>
<div class="line">        ctx_size += 8 * test_options-&gt;ctx_rd_words;</div>
<div class="line">        ctx_size += 8 * test_options-&gt;ctx_rw_words;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* When context data is modified, round up to cache line size to avoid</span></div>
<div class="line"><span class="comment">     * false sharing */</span></div>
<div class="line">    <span class="keywordflow">if</span> (test_options-&gt;fairness || test_options-&gt;ctx_rw_words)</div>
<div class="line">        ctx_size = ROUNDUP(ctx_size, ODP_CACHE_LINE_SIZE);</div>
<div class="line"> </div>
<div class="line">    test_options-&gt;ctx_size = ctx_size;</div>
<div class="line">    test_options-&gt;uarea_size = 8 * (test_options-&gt;uarea_rd + test_options-&gt;uarea_rw);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> ret;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> set_num_cpu(test_global_t *global)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> ret;</div>
<div class="line">    test_options_t *test_options = &amp;global-&gt;test_options;</div>
<div class="line">    <span class="keywordtype">int</span> num_cpu = test_options-&gt;num_cpu;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* One thread used for the main thread */</span></div>
<div class="line">    <span class="keywordflow">if</span> (num_cpu &gt; <a class="code" href="group__odp__thread.html#ga0c7b70f32643b51e1ea09352183c50bf">ODP_THREAD_COUNT_MAX</a> - 1) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Error: Too many workers. Maximum is %i.\n&quot;</span>,</div>
<div class="line">               <a class="code" href="group__odp__thread.html#ga0c7b70f32643b51e1ea09352183c50bf">ODP_THREAD_COUNT_MAX</a> - 1);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    ret = <a name="a13"></a><a class="code" href="group__odp__cpumask.html#ga4ff2d29f52775b12c7df1995754b524d">odp_cpumask_default_worker</a>(&amp;global-&gt;cpumask, num_cpu);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (num_cpu &amp;&amp; ret != num_cpu) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Error: Too many workers. Max supported %i\n.&quot;</span>, ret);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Zero: all available workers */</span></div>
<div class="line">    <span class="keywordflow">if</span> (num_cpu == 0) {</div>
<div class="line">        num_cpu = ret;</div>
<div class="line">        test_options-&gt;num_cpu = num_cpu;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a name="a14"></a><a class="code" href="group__odp__barrier.html#ga1416b47755c2af6267074959ac0d4840">odp_barrier_init</a>(&amp;global-&gt;barrier, num_cpu);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> uint64_t init_data(uint64_t init, uint64_t *data, uint32_t words)</div>
<div class="line">{</div>
<div class="line">    uint32_t i;</div>
<div class="line">    uint64_t val = init;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; words; i++) {</div>
<div class="line">        data[i] = val;</div>
<div class="line">        val = (val + 1) &amp; DATA_MASK;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> val;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> create_pool(test_global_t *global)</div>
<div class="line">{</div>
<div class="line">    <a name="_a15"></a><a class="code" href="structodp__pool__capability__t.html">odp_pool_capability_t</a> pool_capa;</div>
<div class="line">    <a name="_a16"></a><a class="code" href="structodp__pool__param__t.html">odp_pool_param_t</a> pool_param;</div>
<div class="line">    <a class="code" href="struct__odp__abi__pool__t.html">odp_pool_t</a> pool;</div>
<div class="line">    uint32_t max_num, max_size, max_uarea;</div>
<div class="line">    test_options_t *test_options = &amp;global-&gt;test_options;</div>
<div class="line">    uint32_t num_cpu   = test_options-&gt;num_cpu;</div>
<div class="line">    uint32_t num_queue = test_options-&gt;num_queue;</div>
<div class="line">    uint32_t num_dummy = test_options-&gt;num_dummy;</div>
<div class="line">    uint32_t num_event = test_options-&gt;num_event;</div>
<div class="line">    uint32_t num_sched = test_options-&gt;num_sched;</div>
<div class="line">    uint32_t max_burst = test_options-&gt;max_burst;</div>
<div class="line">    uint32_t tot_queue = test_options-&gt;tot_queue;</div>
<div class="line">    uint32_t tot_event = test_options-&gt;tot_event;</div>
<div class="line">    uint32_t queue_size = test_options-&gt;queue_size;</div>
<div class="line">    <span class="keywordtype">int</span>      num_group = test_options-&gt;num_group;</div>
<div class="line">    uint32_t num_join = test_options-&gt;num_join;</div>
<div class="line">    <span class="keywordtype">int</span>      forward   = test_options-&gt;forward;</div>
<div class="line">    uint64_t wait_ns = test_options-&gt;wait_ns;</div>
<div class="line">    uint32_t event_size = 16;</div>
<div class="line">    <span class="keywordtype">int</span>      touch_data = test_options-&gt;touch_data;</div>
<div class="line">    uint32_t ctx_size = test_options-&gt;ctx_size;</div>
<div class="line">    uint32_t uarea_size = test_options-&gt;uarea_size;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (touch_data) {</div>
<div class="line">        event_size = test_options-&gt;rd_words + test_options-&gt;rw_words;</div>
<div class="line">        event_size = 8 * event_size;</div>
<div class="line">    }</div>
<div class="line">    test_options-&gt;event_size = event_size;</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;\nScheduler performance test\n&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;  num sched                 %u\n&quot;</span>, num_sched);</div>
<div class="line">    printf(<span class="stringliteral">&quot;  num cpu                   %u\n&quot;</span>, num_cpu);</div>
<div class="line">    printf(<span class="stringliteral">&quot;  num queues                %u\n&quot;</span>, num_queue);</div>
<div class="line">    printf(<span class="stringliteral">&quot;  num lowest prio queues    %u\n&quot;</span>, test_options-&gt;num_low);</div>
<div class="line">    printf(<span class="stringliteral">&quot;  num highest prio queues   %u\n&quot;</span>, test_options-&gt;num_high);</div>
<div class="line">    printf(<span class="stringliteral">&quot;  num empty queues          %u\n&quot;</span>, num_dummy);</div>
<div class="line">    printf(<span class="stringliteral">&quot;  total queues              %u\n&quot;</span>, tot_queue);</div>
<div class="line">    printf(<span class="stringliteral">&quot;  num groups                %i&quot;</span>, num_group);</div>
<div class="line">    <span class="keywordflow">if</span> (num_group == -1)</div>
<div class="line">        printf(<span class="stringliteral">&quot; (ODP_SCHED_GROUP_WORKER)\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (num_group == 0)</div>
<div class="line">        printf(<span class="stringliteral">&quot; (ODP_SCHED_GROUP_ALL)\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">        printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;  num join                  %u\n&quot;</span>, num_join);</div>
<div class="line">    printf(<span class="stringliteral">&quot;  forward events            %i\n&quot;</span>, forward ? 1 : 0);</div>
<div class="line">    printf(<span class="stringliteral">&quot;  wait nsec                 %&quot;</span> PRIu64 <span class="stringliteral">&quot;\n&quot;</span>, wait_ns);</div>
<div class="line">    printf(<span class="stringliteral">&quot;  events per queue          %u\n&quot;</span>, num_event);</div>
<div class="line">    printf(<span class="stringliteral">&quot;  queue size                %u\n&quot;</span>, queue_size);</div>
<div class="line">    printf(<span class="stringliteral">&quot;  max burst size            %u\n&quot;</span>, max_burst);</div>
<div class="line">    printf(<span class="stringliteral">&quot;  total events              %u\n&quot;</span>, tot_event);</div>
<div class="line">    printf(<span class="stringliteral">&quot;  stress                    0x%x\n&quot;</span>, test_options-&gt;stress);</div>
<div class="line">    printf(<span class="stringliteral">&quot;  event size                %u bytes&quot;</span>, event_size);</div>
<div class="line">    <span class="keywordflow">if</span> (touch_data)</div>
<div class="line">        printf(<span class="stringliteral">&quot; (rd: %u, rw: %u)&quot;</span>, 8 * test_options-&gt;rd_words, 8 * test_options-&gt;rw_words);</div>
<div class="line">    printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;  context size              %u bytes&quot;</span>, ctx_size);</div>
<div class="line">    <span class="keywordflow">if</span> (test_options-&gt;ctx_rd_words || test_options-&gt;ctx_rw_words) {</div>
<div class="line">        printf(<span class="stringliteral">&quot; (rd: %u, rw: %u)&quot;</span>,</div>
<div class="line">               8 * test_options-&gt;ctx_rd_words,</div>
<div class="line">               8 * test_options-&gt;ctx_rw_words);</div>
<div class="line">    }</div>
<div class="line">    printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;  user area size            %u bytes&quot;</span>, uarea_size);</div>
<div class="line">    <span class="keywordflow">if</span> (uarea_size)</div>
<div class="line">        printf(<span class="stringliteral">&quot; (rd: %u, rw: %u)&quot;</span>, 8 * test_options-&gt;uarea_rd, 8 * test_options-&gt;uarea_rw);</div>
<div class="line">    printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a17"></a><a class="code" href="group__odp__pool.html#ga2c6f42e9611904eac84872bf8f913b75">odp_pool_capability</a>(&amp;pool_capa)) {</div>
<div class="line">        ODPH_ERR(<span class="stringliteral">&quot;Error: pool capa failed\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (test_options-&gt;pool_type == <a class="code" href="group__odp__pool.html#ggac47bb33bcde80614b4b358578eaa3082a5f851628c50a0c6a8ee896fd46767806">ODP_POOL_BUFFER</a>) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;  pool type                 buffer\n&quot;</span>);</div>
<div class="line">        max_num = pool_capa.<a name="a18"></a><a class="code" href="structodp__pool__capability__t.html#a07646ccbb83bd16b8e2b0f6f83e6f7c0">buf</a>.<a name="a19"></a><a class="code" href="structodp__pool__capability__t.html#a2b468c5617515bbd5d50a57a7d65e1e0">max_num</a>;</div>
<div class="line">        max_size = pool_capa.<a class="code" href="structodp__pool__capability__t.html#a07646ccbb83bd16b8e2b0f6f83e6f7c0">buf</a>.<a name="a20"></a><a class="code" href="structodp__pool__capability__t.html#a72dedc1c84be84133a0a1553c76853ff">max_size</a>;</div>
<div class="line">        max_uarea = pool_capa.<a class="code" href="structodp__pool__capability__t.html#a07646ccbb83bd16b8e2b0f6f83e6f7c0">buf</a>.<a name="a21"></a><a class="code" href="structodp__pool__capability__t.html#a69c99e04be730e2b11c92fec0d5234f2">max_uarea_size</a>;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        printf(<span class="stringliteral">&quot;  pool type                 packet\n&quot;</span>);</div>
<div class="line">        max_num = pool_capa.<a name="a22"></a><a class="code" href="structodp__pool__capability__t.html#abf8104f5420ff9c12c13258274c229cc">pkt</a>.<a class="code" href="structodp__pool__capability__t.html#a2b468c5617515bbd5d50a57a7d65e1e0">max_num</a>;</div>
<div class="line">        max_size = pool_capa.<a class="code" href="structodp__pool__capability__t.html#abf8104f5420ff9c12c13258274c229cc">pkt</a>.<a name="a23"></a><a class="code" href="structodp__pool__capability__t.html#af4fa3242b2a25c4512acead54a5b7b88">max_seg_len</a>;</div>
<div class="line">        max_uarea = pool_capa.<a class="code" href="structodp__pool__capability__t.html#abf8104f5420ff9c12c13258274c229cc">pkt</a>.<a class="code" href="structodp__pool__capability__t.html#a69c99e04be730e2b11c92fec0d5234f2">max_uarea_size</a>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (max_num &amp;&amp; tot_event &gt; max_num) {</div>
<div class="line">        ODPH_ERR(<span class="stringliteral">&quot;Error: max events supported %u\n&quot;</span>, max_num);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (max_size &amp;&amp; event_size &gt; max_size) {</div>
<div class="line">        ODPH_ERR(<span class="stringliteral">&quot;Error: max supported event size %u\n&quot;</span>, max_size);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (uarea_size &gt; max_uarea) {</div>
<div class="line">        ODPH_ERR(<span class="stringliteral">&quot;Error: max supported user area size %u\n&quot;</span>, max_uarea);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a name="a24"></a><a class="code" href="group__odp__pool.html#ga3dd8bcfb920f81142e9fe27cfba24073">odp_pool_param_init</a>(&amp;pool_param);</div>
<div class="line">    <span class="keywordflow">if</span> (test_options-&gt;pool_type == <a class="code" href="group__odp__pool.html#ggac47bb33bcde80614b4b358578eaa3082a5f851628c50a0c6a8ee896fd46767806">ODP_POOL_BUFFER</a>) {</div>
<div class="line">        pool_param.<a name="a25"></a><a class="code" href="structodp__pool__param__t.html#aac72ae142dd9736a287ce63d78b71c87">type</a> = <a class="code" href="group__odp__pool.html#ggac47bb33bcde80614b4b358578eaa3082a5f851628c50a0c6a8ee896fd46767806">ODP_POOL_BUFFER</a>;</div>
<div class="line">        pool_param.<a name="a26"></a><a class="code" href="structodp__pool__param__t.html#a406965a15af2f21e4708b6afb0b5bfd5">buf</a>.<a name="a27"></a><a class="code" href="structodp__pool__param__t.html#a3598b3a2496629cd45010c1c5e876250">num</a> = tot_event;</div>
<div class="line">        pool_param.<a class="code" href="structodp__pool__param__t.html#a406965a15af2f21e4708b6afb0b5bfd5">buf</a>.<a name="a28"></a><a class="code" href="structodp__pool__param__t.html#aa11286791288fff8f292caae1fc62002">size</a> = event_size;</div>
<div class="line">        pool_param.<a class="code" href="structodp__pool__param__t.html#a406965a15af2f21e4708b6afb0b5bfd5">buf</a>.<a name="a29"></a><a class="code" href="structodp__pool__param__t.html#a594fe99ec16c3e62e08851f955567b0e">align</a> = 8;</div>
<div class="line">        pool_param.<a class="code" href="structodp__pool__param__t.html#a406965a15af2f21e4708b6afb0b5bfd5">buf</a>.<a name="a30"></a><a class="code" href="structodp__pool__param__t.html#a07f656f3afc9bc0212441bf6916d700e">uarea_size</a> = uarea_size;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        pool_param.<a class="code" href="structodp__pool__param__t.html#aac72ae142dd9736a287ce63d78b71c87">type</a> = <a class="code" href="group__odp__pool.html#ggac47bb33bcde80614b4b358578eaa3082aa02b3a4e37094bd277b3dfe371450acd">ODP_POOL_PACKET</a>;</div>
<div class="line">        pool_param.<a name="a31"></a><a class="code" href="structodp__pool__param__t.html#ab81d63235f8c63acc9c72cf2625afbd5">pkt</a>.<a class="code" href="structodp__pool__param__t.html#a3598b3a2496629cd45010c1c5e876250">num</a> = tot_event;</div>
<div class="line">        pool_param.<a class="code" href="structodp__pool__param__t.html#ab81d63235f8c63acc9c72cf2625afbd5">pkt</a>.<a name="a32"></a><a class="code" href="structodp__pool__param__t.html#ac1ccfa50466f4afa9a9ab72f0bd315bf">len</a> = event_size;</div>
<div class="line">        pool_param.<a class="code" href="structodp__pool__param__t.html#ab81d63235f8c63acc9c72cf2625afbd5">pkt</a>.<a name="a33"></a><a class="code" href="structodp__pool__param__t.html#ad400db5955445ee3d1fbb36df456e7f1">seg_len</a> = event_size;</div>
<div class="line">        pool_param.<a class="code" href="structodp__pool__param__t.html#ab81d63235f8c63acc9c72cf2625afbd5">pkt</a>.<a class="code" href="structodp__pool__param__t.html#a594fe99ec16c3e62e08851f955567b0e">align</a> = 8;</div>
<div class="line">        pool_param.<a class="code" href="structodp__pool__param__t.html#ab81d63235f8c63acc9c72cf2625afbd5">pkt</a>.<a class="code" href="structodp__pool__param__t.html#a07f656f3afc9bc0212441bf6916d700e">uarea_size</a> = uarea_size;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    pool = <a name="a34"></a><a class="code" href="group__odp__pool.html#ga256909a276600c25ce11b52ae274632f">odp_pool_create</a>(<span class="stringliteral">&quot;sched perf&quot;</span>, &amp;pool_param);</div>
<div class="line">    <span class="keywordflow">if</span> (pool == <a name="a35"></a><a class="code" href="group__odp__pool.html#gafca03b58412260da754042a92f8a5e04">ODP_POOL_INVALID</a>) {</div>
<div class="line">        ODPH_ERR(<span class="stringliteral">&quot;Error: pool create failed\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    global-&gt;pool = pool;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> create_groups(test_global_t *global)</div>
<div class="line">{</div>
<div class="line">    <a name="_a36"></a><a class="code" href="structodp__schedule__capability__t.html">odp_schedule_capability_t</a> sched_capa;</div>
<div class="line">    <a name="_a37"></a><a class="code" href="structodp__thrmask__t.html">odp_thrmask_t</a> thrmask;</div>
<div class="line">    uint32_t i;</div>
<div class="line">    test_options_t *test_options = &amp;global-&gt;test_options;</div>
<div class="line">    uint32_t num_group = test_options-&gt;num_group;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (test_options-&gt;num_group &lt;= 0)</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a38"></a><a class="code" href="group__odp__scheduler.html#gabde3ebecd35c0442a2e2a20144af0d80">odp_schedule_capability</a>(&amp;sched_capa)) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Error: schedule capability failed\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (num_group &gt; sched_capa.<a name="a39"></a><a class="code" href="structodp__schedule__capability__t.html#a15ee50c62bfa7da7fc3f307f872a5a44">max_groups</a>) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Error: Too many sched groups (max_groups capa %u)\n&quot;</span>,</div>
<div class="line">               sched_capa.<a class="code" href="structodp__schedule__capability__t.html#a15ee50c62bfa7da7fc3f307f872a5a44">max_groups</a>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a name="a40"></a><a class="code" href="group__odp__thread.html#gaf1d55ea5d614754bd1de40229314869f">odp_thrmask_zero</a>(&amp;thrmask);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; num_group; i++) {</div>
<div class="line">        <a class="code" href="group__odp__scheduler.html#ga3cd27b316530d297eab83d851bf2deb8">odp_schedule_group_t</a> group;</div>
<div class="line"> </div>
<div class="line">        group = <a name="a41"></a><a class="code" href="group__odp__scheduler.html#gade17d812771d4e386aac0810b05fa0e5">odp_schedule_group_create</a>(<span class="stringliteral">&quot;test_group&quot;</span>, &amp;thrmask);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (group == <a name="a42"></a><a class="code" href="group__odp__scheduler.html#ga8a6ab4ff9386d9a4ffcb4b19d516a3fb">ODP_SCHED_GROUP_INVALID</a>) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;Error: Group create failed %u\n&quot;</span>, i);</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        global-&gt;group[i] = group;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> create_queues(test_global_t *global)</div>
<div class="line">{</div>
<div class="line">    <a name="_a43"></a><a class="code" href="structodp__queue__param__t.html">odp_queue_param_t</a> queue_param;</div>
<div class="line">    <a class="code" href="struct__odp__abi__queue__t.html">odp_queue_t</a> queue;</div>
<div class="line">    <a class="code" href="group__odp__scheduler.html#ga05c15f8076326b98fe2fc534dcc6b319">odp_schedule_sync_t</a> sync;</div>
<div class="line">    <a class="code" href="group__odp__scheduler.html#ga33e9d26217f2f689b2611298dec5daf7">odp_schedule_prio_t</a> prio;</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span> *type_str;</div>
<div class="line">    uint32_t i, j, first;</div>
<div class="line">    test_options_t *test_options = &amp;global-&gt;test_options;</div>
<div class="line">    uint32_t event_size = test_options-&gt;event_size;</div>
<div class="line">    uint32_t num_event = test_options-&gt;num_event;</div>
<div class="line">    uint32_t queue_size = test_options-&gt;queue_size;</div>
<div class="line">    uint32_t tot_queue = test_options-&gt;tot_queue;</div>
<div class="line">    uint32_t num_low = test_options-&gt;num_low;</div>
<div class="line">    uint32_t num_high = test_options-&gt;num_high;</div>
<div class="line">    uint32_t num_default = test_options-&gt;num_queue - num_low - num_high;</div>
<div class="line">    <span class="keywordtype">int</span> num_group = test_options-&gt;num_group;</div>
<div class="line">    <span class="keywordtype">int</span> type = test_options-&gt;queue_type;</div>
<div class="line">    <a class="code" href="struct__odp__abi__pool__t.html">odp_pool_t</a> pool = global-&gt;pool;</div>
<div class="line">    uint8_t *ctx = NULL;</div>
<div class="line">    uint32_t ctx_size = test_options-&gt;ctx_size;</div>
<div class="line">    uint64_t init_val = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (type == 0) {</div>
<div class="line">        type_str = <span class="stringliteral">&quot;parallel&quot;</span>;</div>
<div class="line">        sync = <a name="a44"></a><a class="code" href="group__odp__scheduler.html#ga2ba135fc660e1c050aa25ec6744ec584">ODP_SCHED_SYNC_PARALLEL</a>;</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == 1) {</div>
<div class="line">        type_str = <span class="stringliteral">&quot;atomic&quot;</span>;</div>
<div class="line">        sync = <a name="a45"></a><a class="code" href="group__odp__scheduler.html#ga4b7efc5cfc27ef416312f5adb8bdc392">ODP_SCHED_SYNC_ATOMIC</a>;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        type_str = <span class="stringliteral">&quot;ordered&quot;</span>;</div>
<div class="line">        sync = <a name="a46"></a><a class="code" href="group__odp__scheduler.html#ga4df3696ebf4528ecc6e69ae3fff040fd">ODP_SCHED_SYNC_ORDERED</a>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;  queue type                %s\n\n&quot;</span>, type_str);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (tot_queue &gt; global-&gt;schedule_config.num_queues) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Max queues supported %u\n&quot;</span>,</div>
<div class="line">               global-&gt;schedule_config.num_queues);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (global-&gt;schedule_config.queue_size &amp;&amp;</div>
<div class="line">        queue_size &gt; global-&gt;schedule_config.queue_size) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Max queue size %u\n&quot;</span>,</div>
<div class="line">               global-&gt;schedule_config.queue_size);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (ctx_size) {</div>
<div class="line">        ctx = <a name="a47"></a><a class="code" href="group__odp__shared__memory.html#gac94c4232f7cd64039bbaef601ff2c05e">odp_shm_addr</a>(global-&gt;ctx_shm);</div>
<div class="line">        <span class="keywordflow">if</span> (ctx == NULL) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;Bad queue context\n&quot;</span>);</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a name="a48"></a><a class="code" href="group__odp__queue.html#ga6fc2ea5eb86152210342f7377d1468e4">odp_queue_param_init</a>(&amp;queue_param);</div>
<div class="line">    queue_param.<a name="a49"></a><a class="code" href="structodp__queue__param__t.html#a6a7251138773a3110bdc0e8d5f5b3be9">type</a> = <a name="a50"></a><a class="code" href="group__odp__queue.html#gga89a3439d3f3be48cac1767cba721eddaa4f49ad2143a9ba8a5914573d2794e962">ODP_QUEUE_TYPE_SCHED</a>;</div>
<div class="line">    queue_param.<a name="a51"></a><a class="code" href="structodp__queue__param__t.html#a371701df4d20cee95978b9265c232e32">sched</a>.<a name="a52"></a><a class="code" href="structodp__schedule__param__t.html#ad4ca09d63edb0cec36567c26688cea14">sync</a>  = sync;</div>
<div class="line">    queue_param.<a name="a53"></a><a class="code" href="structodp__queue__param__t.html#a5f045dbc199867e8ff2d23c617603b4e">size</a> = queue_size;</div>
<div class="line">    <span class="keywordflow">if</span> (num_group == -1)</div>
<div class="line">        queue_param.<a class="code" href="structodp__queue__param__t.html#a371701df4d20cee95978b9265c232e32">sched</a>.<a name="a54"></a><a class="code" href="structodp__schedule__param__t.html#a0bc7830a919f31ce295a20c51a7e2648">group</a> = <a name="a55"></a><a class="code" href="group__odp__scheduler.html#ga72125b596aa5d2e61dd61e177516e24e">ODP_SCHED_GROUP_WORKER</a>;</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">        queue_param.<a class="code" href="structodp__queue__param__t.html#a371701df4d20cee95978b9265c232e32">sched</a>.<a class="code" href="structodp__schedule__param__t.html#a0bc7830a919f31ce295a20c51a7e2648">group</a> = <a name="a56"></a><a class="code" href="group__odp__scheduler.html#gaf463b15ad978dac0bf77c0110232b504">ODP_SCHED_GROUP_ALL</a>;</div>
<div class="line"> </div>
<div class="line">    first = test_options-&gt;num_dummy;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; tot_queue; i++) {</div>
<div class="line">        <span class="keywordflow">if</span> (num_group &gt; 0) {</div>
<div class="line">            <a class="code" href="group__odp__scheduler.html#ga3cd27b316530d297eab83d851bf2deb8">odp_schedule_group_t</a> group;</div>
<div class="line"> </div>
<div class="line">            <span class="comment">/* Divide all queues evenly into groups */</span></div>
<div class="line">            group = global-&gt;group[i % num_group];</div>
<div class="line">            queue_param.<a class="code" href="structodp__queue__param__t.html#a371701df4d20cee95978b9265c232e32">sched</a>.<a class="code" href="structodp__schedule__param__t.html#a0bc7830a919f31ce295a20c51a7e2648">group</a> = group;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Create low, high and default queues in a mixed order. Dummy queues are created</span></div>
<div class="line"><span class="comment">         * first and with default priority. */</span></div>
<div class="line">        prio = <a name="a57"></a><a class="code" href="group__odp__scheduler.html#ga94034a7f591f3f549099aebb098f7e05">odp_schedule_default_prio</a>();</div>
<div class="line">        <span class="keywordflow">if</span> (i &gt;= first) {</div>
<div class="line">            <span class="keywordflow">switch</span> (i % 3) {</div>
<div class="line">            <span class="keywordflow">case</span> 0:</div>
<div class="line">                <span class="keywordflow">if</span> (num_low) {</div>
<div class="line">                    num_low--;</div>
<div class="line">                    prio = <a name="a58"></a><a class="code" href="group__odp__scheduler.html#ga53b421f0656421e67cc7fd841e5576b5">odp_schedule_min_prio</a>();</div>
<div class="line">                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (num_high) {</div>
<div class="line">                    num_high--;</div>
<div class="line">                    prio = <a name="a59"></a><a class="code" href="group__odp__scheduler.html#ga9d91b9144cf2ccdcb112b7376a38aeaf">odp_schedule_max_prio</a>();</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                    num_default--;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            <span class="keywordflow">case</span> 1:</div>
<div class="line">                <span class="keywordflow">if</span> (num_high) {</div>
<div class="line">                    num_high--;</div>
<div class="line">                    prio = <a class="code" href="group__odp__scheduler.html#ga9d91b9144cf2ccdcb112b7376a38aeaf">odp_schedule_max_prio</a>();</div>
<div class="line">                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (num_low) {</div>
<div class="line">                    num_low--;</div>
<div class="line">                    prio = <a class="code" href="group__odp__scheduler.html#ga53b421f0656421e67cc7fd841e5576b5">odp_schedule_min_prio</a>();</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                    num_default--;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            <span class="keywordflow">default</span>:</div>
<div class="line">                <span class="keywordflow">if</span> (num_default) {</div>
<div class="line">                    num_default--;</div>
<div class="line">                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (num_high) {</div>
<div class="line">                    num_high--;</div>
<div class="line">                    prio = <a class="code" href="group__odp__scheduler.html#ga9d91b9144cf2ccdcb112b7376a38aeaf">odp_schedule_max_prio</a>();</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                    num_low--;</div>
<div class="line">                    prio = <a class="code" href="group__odp__scheduler.html#ga53b421f0656421e67cc7fd841e5576b5">odp_schedule_min_prio</a>();</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        queue_param.<a class="code" href="structodp__queue__param__t.html#a371701df4d20cee95978b9265c232e32">sched</a>.<a name="a60"></a><a class="code" href="structodp__schedule__param__t.html#a3f103771c3a9319c1ec998fa8724b8ac">prio</a> = prio;</div>
<div class="line"> </div>
<div class="line">        queue = <a name="a61"></a><a class="code" href="group__odp__queue.html#gab985be8c3947fef3da257e16948bf0f0">odp_queue_create</a>(NULL, &amp;queue_param);</div>
<div class="line"> </div>
<div class="line">        global-&gt;queue[i] = queue;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (queue == <a name="a62"></a><a class="code" href="group__odp__queue.html#ga771259a58e71e065e0d00d2fc431b014">ODP_QUEUE_INVALID</a>) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;Error: Queue create failed %u\n&quot;</span>, i);</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Store events into queues. Dummy queues are allocated from</span></div>
<div class="line"><span class="comment">     * the beginning of the array, so that usage of those affect allocation</span></div>
<div class="line"><span class="comment">     * of active queues. Dummy queues are left empty. */</span></div>
<div class="line">    <span class="keywordflow">for</span> (i = first; i &lt; tot_queue; i++) {</div>
<div class="line">        queue = global-&gt;queue[i];</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (ctx_size) {</div>
<div class="line">            <span class="comment">/*</span></div>
<div class="line"><span class="comment">             * Cast increases alignment, but it&#39;s ok, since ctx and</span></div>
<div class="line"><span class="comment">             * ctx_size are both cache line aligned.</span></div>
<div class="line"><span class="comment">             */</span></div>
<div class="line">            queue_context_t *qc = (queue_context_t *)(uintptr_t)ctx;</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (test_options-&gt;forward) {</div>
<div class="line">                uint32_t next = i + 1;</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">if</span> (next == tot_queue)</div>
<div class="line">                    next = first;</div>
<div class="line"> </div>
<div class="line">                qc-&gt;next = global-&gt;queue[next];</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (test_options-&gt;fairness)</div>
<div class="line">                <a name="a63"></a><a class="code" href="group__odp__atomic.html#ga325f41ac9f4b2220d0562e91dbaafc86">odp_atomic_init_u64</a>(&amp;qc-&gt;count, 0);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (<a name="a64"></a><a class="code" href="group__odp__queue.html#ga5c003a7027eb97f12b263d674be853ae">odp_queue_context_set</a>(queue, ctx, ctx_size)) {</div>
<div class="line">                printf(<span class="stringliteral">&quot;Error: Context set failed %u\n&quot;</span>, i);</div>
<div class="line">                <span class="keywordflow">return</span> -1;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            ctx += ctx_size;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (j = 0; j &lt; num_event; j++) {</div>
<div class="line">            <a name="_a65"></a><a class="code" href="struct__odp__abi__event__t.html">odp_event_t</a> ev;</div>
<div class="line">            uint64_t *data;</div>
<div class="line">            uint32_t words;</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (test_options-&gt;pool_type == <a class="code" href="group__odp__pool.html#ggac47bb33bcde80614b4b358578eaa3082a5f851628c50a0c6a8ee896fd46767806">ODP_POOL_BUFFER</a>) {</div>
<div class="line">                <a name="_a66"></a><a class="code" href="struct__odp__abi__buffer__t.html">odp_buffer_t</a> buf = <a name="a67"></a><a class="code" href="group__odp__buffer.html#ga2d7e4d7385b794f5016c000a94361dbd">odp_buffer_alloc</a>(pool);</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">if</span> (buf == <a name="a68"></a><a class="code" href="group__odp__buffer.html#gabdd0bdf9a225e7fca8d3bdd3d717adda">ODP_BUFFER_INVALID</a>) {</div>
<div class="line">                    ODPH_ERR(<span class="stringliteral">&quot;Error: alloc failed %u/%u\n&quot;</span>, i, j);</div>
<div class="line">                    <span class="keywordflow">return</span> -1;</div>
<div class="line">                }</div>
<div class="line">                ev = <a name="a69"></a><a class="code" href="group__odp__buffer.html#ga2a0acbcbd9f727d292b9ae248f82699f">odp_buffer_to_event</a>(buf);</div>
<div class="line"> </div>
<div class="line">                data  = <a name="a70"></a><a class="code" href="group__odp__buffer.html#ga48f34caa699db93599513ffc14ba0dd2">odp_buffer_addr</a>(buf);</div>
<div class="line">                words = <a name="a71"></a><a class="code" href="group__odp__buffer.html#ga1125de5fd93c058a7034cf7789b60c0c">odp_buffer_size</a>(buf) / 8;</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                <a name="_a72"></a><a class="code" href="struct__odp__abi__packet__t.html">odp_packet_t</a> pkt = <a name="a73"></a><a class="code" href="group__odp__packet.html#ga7528dda77d71a9dbfe563dffb62d8318">odp_packet_alloc</a>(pool, event_size);</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">if</span> (pkt == <a name="a74"></a><a class="code" href="group__odp__packet.html#gaba8cf39480fb133ab8299155d4ef63dc">ODP_PACKET_INVALID</a>) {</div>
<div class="line">                    ODPH_ERR(<span class="stringliteral">&quot;Error: alloc failed %u/%u\n&quot;</span>, i, j);</div>
<div class="line">                    <span class="keywordflow">return</span> -1;</div>
<div class="line">                }</div>
<div class="line">                ev = <a name="a75"></a><a class="code" href="group__odp__packet.html#ga1f738db1a7ac6ffe4573195ff158d56e">odp_packet_to_event</a>(pkt);</div>
<div class="line"> </div>
<div class="line">                data  = <a name="a76"></a><a class="code" href="group__odp__packet.html#ga433ba21e3c83c6d4d9831c9e732b63de">odp_packet_data</a>(pkt);</div>
<div class="line">                words = <a name="a77"></a><a class="code" href="group__odp__packet.html#ga22a6d43d83393129dcd548194930bfcf">odp_packet_seg_len</a>(pkt) / 8;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            init_val = init_data(init_val, data, words);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (<a name="a78"></a><a class="code" href="group__odp__queue.html#ga985c2e5219f65c270b50578c16ec9d61">odp_queue_enq</a>(queue, ev)) {</div>
<div class="line">                ODPH_ERR(<span class="stringliteral">&quot;Error: enqueue failed %u/%u\n&quot;</span>, i, j);</div>
<div class="line">                <span class="keywordflow">return</span> -1;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> join_group(test_global_t *global, <span class="keywordtype">int</span> grp_index, <span class="keywordtype">int</span> thr)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="structodp__thrmask__t.html">odp_thrmask_t</a> thrmask;</div>
<div class="line">    <a class="code" href="group__odp__scheduler.html#ga3cd27b316530d297eab83d851bf2deb8">odp_schedule_group_t</a> group;</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="group__odp__thread.html#gaf1d55ea5d614754bd1de40229314869f">odp_thrmask_zero</a>(&amp;thrmask);</div>
<div class="line">    <a name="a79"></a><a class="code" href="group__odp__thread.html#ga89b0cb677eb6a08fc84ef0afa3667419">odp_thrmask_set</a>(&amp;thrmask, thr);</div>
<div class="line">    group = global-&gt;group[grp_index];</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a80"></a><a class="code" href="group__odp__scheduler.html#ga3f7a7ab39ee69f8538edd9dd506127b6">odp_schedule_group_join</a>(group, &amp;thrmask)) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Error: Group %i join failed (thr %i)\n&quot;</span>,</div>
<div class="line">               grp_index, thr);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> join_all_groups(test_global_t *global, <span class="keywordtype">int</span> thr)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> i;</div>
<div class="line">    test_options_t *test_options = &amp;global-&gt;test_options;</div>
<div class="line">    <span class="keywordtype">int</span> num_group = test_options-&gt;num_group;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (num_group &lt;= 0)</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; num_group; i++) {</div>
<div class="line">        <span class="keywordflow">if</span> (join_group(global, i, thr)) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;Error: Group %u join failed (thr %i)\n&quot;</span>,</div>
<div class="line">                   i, thr);</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> print_queue_fairness(test_global_t *global)</div>
<div class="line">{</div>
<div class="line">    uint32_t i;</div>
<div class="line">    queue_context_t *ctx;</div>
<div class="line">    test_options_t *test_options = &amp;global-&gt;test_options;</div>
<div class="line">    uint32_t first = test_options-&gt;num_dummy;</div>
<div class="line">    uint32_t num_queue = test_options-&gt;num_queue;</div>
<div class="line">    uint32_t tot_queue = test_options-&gt;tot_queue;</div>
<div class="line">    uint64_t total = 0;</div>
<div class="line">    <span class="keywordtype">double</span> average;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!test_options-&gt;fairness)</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = first; i &lt; tot_queue; i++) {</div>
<div class="line">        ctx = <a name="a81"></a><a class="code" href="group__odp__queue.html#ga96ab88617101283b30ba784c9c9e7367">odp_queue_context</a>(global-&gt;queue[i]);</div>
<div class="line">        total += <a name="a82"></a><a class="code" href="group__odp__atomic.html#gafe63805cc280307e31478439280537e2">odp_atomic_load_u64</a>(&amp;ctx-&gt;count);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    average = (double)total / (<span class="keywordtype">double</span>)num_queue;</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;RESULTS - events per queue (percent of average):\n&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;------------------------------------------------\n&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;        1      2      3      4      5      6      7      8      9     10&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = first; i &lt; tot_queue; i++) {</div>
<div class="line">        ctx = <a class="code" href="group__odp__queue.html#ga96ab88617101283b30ba784c9c9e7367">odp_queue_context</a>(global-&gt;queue[i]);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> ((i % 10) == 0)</div>
<div class="line">            printf(<span class="stringliteral">&quot;\n   &quot;</span>);</div>
<div class="line"> </div>
<div class="line">        printf(<span class="stringliteral">&quot;%6.1f &quot;</span>, (<span class="keywordtype">double</span>)<a class="code" href="group__odp__atomic.html#gafe63805cc280307e31478439280537e2">odp_atomic_load_u64</a>(&amp;ctx-&gt;count) /</div>
<div class="line">                     average * 100.0);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> destroy_queues(test_global_t *global)</div>
<div class="line">{</div>
<div class="line">    uint32_t i;</div>
<div class="line">    <a class="code" href="struct__odp__abi__event__t.html">odp_event_t</a> ev;</div>
<div class="line">    uint64_t wait;</div>
<div class="line">    test_options_t *test_options = &amp;global-&gt;test_options;</div>
<div class="line">    uint32_t tot_queue = test_options-&gt;tot_queue;</div>
<div class="line">    <span class="keywordtype">int</span> thr = <a name="a83"></a><a class="code" href="group__odp__thread.html#gad6562e7320d48463715bbf15748ae360">odp_thread_id</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (join_all_groups(global, thr))</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line"> </div>
<div class="line">    wait = <a name="a84"></a><a class="code" href="group__odp__scheduler.html#gab0a0d2673cc7371d5c5d782d13a485b8">odp_schedule_wait_time</a>(200 * <a name="a85"></a><a class="code" href="group__odp__time.html#gabad65a44847cb6d46c2ae9cc96a80a4c">ODP_TIME_MSEC_IN_NS</a>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> ((ev = <a name="a86"></a><a class="code" href="group__odp__scheduler.html#gae4ca1012ebb16ff8b9752b958dc45ce6">odp_schedule</a>(NULL, wait)) != <a name="a87"></a><a class="code" href="group__odp__event.html#gae1a3732a534ba7a892fca38b824591b0">ODP_EVENT_INVALID</a>)</div>
<div class="line">        <a name="a88"></a><a class="code" href="group__odp__event.html#ga1622f73356c325f625db747cb3badf8d">odp_event_free</a>(ev);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; tot_queue; i++) {</div>
<div class="line">        <span class="keywordflow">if</span> (global-&gt;queue[i] != <a class="code" href="group__odp__queue.html#ga771259a58e71e065e0d00d2fc431b014">ODP_QUEUE_INVALID</a>) {</div>
<div class="line">            <span class="keywordflow">if</span> (<a name="a89"></a><a class="code" href="group__odp__queue.html#gad1e1d2709808385025dd5f005f7690c4">odp_queue_destroy</a>(global-&gt;queue[i])) {</div>
<div class="line">                printf(<span class="stringliteral">&quot;Error: Queue destroy failed %u\n&quot;</span>, i);</div>
<div class="line">                <span class="keywordflow">return</span> -1;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> destroy_groups(test_global_t *global)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> i;</div>
<div class="line">    test_options_t *test_options = &amp;global-&gt;test_options;</div>
<div class="line">    <span class="keywordtype">int</span> num_group = test_options-&gt;num_group;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (num_group &lt;= 0)</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; num_group; i++) {</div>
<div class="line">        <a class="code" href="group__odp__scheduler.html#ga3cd27b316530d297eab83d851bf2deb8">odp_schedule_group_t</a> group = global-&gt;group[i];</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a name="a90"></a><a class="code" href="group__odp__scheduler.html#ga789089301ab1da404d927deace0c2492">odp_schedule_group_destroy</a>(group)) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;Error: Group destroy failed %u\n&quot;</span>, i);</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> uint64_t rw_uarea(<a class="code" href="struct__odp__abi__event__t.html">odp_event_t</a> ev[], <span class="keywordtype">int</span> num, uint32_t rd_words, uint32_t rw_words)</div>
<div class="line">{</div>
<div class="line">    uint64_t *data;</div>
<div class="line">    <span class="keywordtype">int</span> i;</div>
<div class="line">    uint32_t j;</div>
<div class="line">    uint64_t sum = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; num; i++) {</div>
<div class="line">        data = <a name="a91"></a><a class="code" href="group__odp__event.html#gaba75b0c7623ec78e3cf6f9b21494b220">odp_event_user_area</a>(ev[i]);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (j = 0; j &lt; rd_words; j++)</div>
<div class="line">            sum += data[j];</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (; j &lt; rd_words + rw_words; j++) {</div>
<div class="line">            sum += data[j];</div>
<div class="line">            data[j] += 1;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> sum;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">inline</span> uint64_t rw_ctx_data(<span class="keywordtype">void</span> *ctx, uint32_t offset,</div>
<div class="line">                   uint32_t rd_words, uint32_t rw_words)</div>
<div class="line">{</div>
<div class="line">    uint64_t *data;</div>
<div class="line">    uint32_t i;</div>
<div class="line">    uint64_t sum = 0;</div>
<div class="line"> </div>
<div class="line">    data = (uint64_t *)(uintptr_t)((uint8_t *)ctx + offset);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; rd_words; i++)</div>
<div class="line">        sum += data[i];</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (; i &lt; rd_words + rw_words; i++) {</div>
<div class="line">        sum += data[i];</div>
<div class="line">        data[i] += 1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> sum;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> uint64_t rw_data(<a class="code" href="struct__odp__abi__event__t.html">odp_event_t</a> ev[], <span class="keywordtype">int</span> num, uint32_t rd_words, uint32_t rw_words,</div>
<div class="line">            <a class="code" href="group__odp__pool.html#gac47bb33bcde80614b4b358578eaa3082">odp_pool_type_t</a> pool_type)</div>
<div class="line">{</div>
<div class="line">    uint64_t *data;</div>
<div class="line">    uint32_t j;</div>
<div class="line">    uint64_t sum = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; num; i++) {</div>
<div class="line">        <span class="keywordflow">if</span> (pool_type == <a class="code" href="group__odp__pool.html#ggac47bb33bcde80614b4b358578eaa3082a5f851628c50a0c6a8ee896fd46767806">ODP_POOL_BUFFER</a>)</div>
<div class="line">            data = <a class="code" href="group__odp__buffer.html#ga48f34caa699db93599513ffc14ba0dd2">odp_buffer_addr</a>(<a name="a92"></a><a class="code" href="group__odp__buffer.html#ga8a6c336128e5cba2380603e6067544f0">odp_buffer_from_event</a>(ev[i]));</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">            data = <a class="code" href="group__odp__packet.html#ga433ba21e3c83c6d4d9831c9e732b63de">odp_packet_data</a>(<a name="a93"></a><a class="code" href="group__odp__packet.html#ga8605e7d4629a479f7b1a59da121c601c">odp_packet_from_event</a>(ev[i]));</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (j = 0; j &lt; rd_words; j++)</div>
<div class="line">            sum += data[j];</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (; j &lt; rd_words + rw_words; j++) {</div>
<div class="line">            sum += data[j];</div>
<div class="line">            data[j] += 1;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> sum;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> uint64_t rw_data_stress(<a class="code" href="struct__odp__abi__event__t.html">odp_event_t</a> ev[], <span class="keywordtype">int</span> num, uint32_t rd_words, uint32_t rw_words,</div>
<div class="line">                   uint32_t stress, <a class="code" href="group__odp__pool.html#gac47bb33bcde80614b4b358578eaa3082">odp_pool_type_t</a> pool_type)</div>
<div class="line">{</div>
<div class="line">    uint64_t *data;</div>
<div class="line">    uint64_t word;</div>
<div class="line">    uint32_t j;</div>
<div class="line">    uint64_t sum = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; num; i++) {</div>
<div class="line">        <span class="keywordflow">if</span> (pool_type == <a class="code" href="group__odp__pool.html#ggac47bb33bcde80614b4b358578eaa3082a5f851628c50a0c6a8ee896fd46767806">ODP_POOL_BUFFER</a>)</div>
<div class="line">            data = <a class="code" href="group__odp__buffer.html#ga48f34caa699db93599513ffc14ba0dd2">odp_buffer_addr</a>(<a class="code" href="group__odp__buffer.html#ga8a6c336128e5cba2380603e6067544f0">odp_buffer_from_event</a>(ev[i]));</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">            data = <a class="code" href="group__odp__packet.html#ga433ba21e3c83c6d4d9831c9e732b63de">odp_packet_data</a>(<a class="code" href="group__odp__packet.html#ga8605e7d4629a479f7b1a59da121c601c">odp_packet_from_event</a>(ev[i]));</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">for</span> (j = 0; j &lt; rd_words + rw_words; j++) {</div>
<div class="line">            word = data[j];</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (stress &amp; 0x1)</div>
<div class="line">                sum += odph_stress_pow2_u32(word);</div>
<div class="line">            <span class="keywordflow">if</span> (stress &amp; 0x2)</div>
<div class="line">                sum += odph_stress_log2_u32(word);</div>
<div class="line">            <span class="keywordflow">if</span> (stress &amp; 0x4)</div>
<div class="line">                sum += odph_stress_sqrt_u32(word);</div>
<div class="line">            <span class="keywordflow">if</span> (stress &amp; 0x8)</div>
<div class="line">                sum += odph_stress_sqrt_f32(word);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (j &gt;= rd_words)</div>
<div class="line">                data[j] = (word + 1) &amp; DATA_MASK;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> sum;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> test_sched(<span class="keywordtype">void</span> *arg)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> num, num_enq, ret, thr;</div>
<div class="line">    uint32_t i, rounds;</div>
<div class="line">    uint64_t c1, c2, cycles, nsec;</div>
<div class="line">    uint64_t events, enqueues, waits, events_prev;</div>
<div class="line">    <a name="_a94"></a><a class="code" href="structodp__time__t.html">odp_time_t</a> t1, t2, last_retry_ts;</div>
<div class="line">    <a class="code" href="struct__odp__abi__queue__t.html">odp_queue_t</a> queue;</div>
<div class="line">    thread_arg_t *thread_arg = arg;</div>
<div class="line">    test_global_t *global = thread_arg-&gt;global;</div>
<div class="line">    test_options_t *test_options = &amp;global-&gt;test_options;</div>
<div class="line">    uint32_t num_sched = test_options-&gt;num_sched;</div>
<div class="line">    uint32_t max_burst = test_options-&gt;max_burst;</div>
<div class="line">    <span class="keywordtype">int</span> num_group = test_options-&gt;num_group;</div>
<div class="line">    <span class="keywordtype">int</span> forward = test_options-&gt;forward;</div>
<div class="line">    <span class="keywordtype">int</span> fairness = test_options-&gt;fairness;</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">int</span> touch_data = test_options-&gt;touch_data;</div>
<div class="line">    <span class="keyword">const</span> uint32_t stress = test_options-&gt;stress;</div>
<div class="line">    <span class="keyword">const</span> uint32_t rd_words = test_options-&gt;rd_words;</div>
<div class="line">    <span class="keyword">const</span> uint32_t rw_words = test_options-&gt;rw_words;</div>
<div class="line">    uint32_t ctx_size = test_options-&gt;ctx_size;</div>
<div class="line">    uint32_t ctx_rd_words = test_options-&gt;ctx_rd_words;</div>
<div class="line">    uint32_t ctx_rw_words = test_options-&gt;ctx_rw_words;</div>
<div class="line">    <span class="keyword">const</span> uint32_t uarea_size = test_options-&gt;uarea_size;</div>
<div class="line">    <span class="keyword">const</span> uint32_t uarea_rd = test_options-&gt;uarea_rd;</div>
<div class="line">    <span class="keyword">const</span> uint32_t uarea_rw = test_options-&gt;uarea_rw;</div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="group__odp__pool.html#gac47bb33bcde80614b4b358578eaa3082">odp_pool_type_t</a> pool_type = test_options-&gt;pool_type;</div>
<div class="line">    <span class="keywordtype">int</span> touch_ctx = ctx_rd_words || ctx_rw_words;</div>
<div class="line">    <a class="code" href="structodp__atomic__u32__s.html">odp_atomic_u32_t</a> *exit_threads = &amp;global-&gt;exit_threads;</div>
<div class="line">    uint32_t ctx_offset = 0;</div>
<div class="line">    uint32_t sched_retries = 0;</div>
<div class="line">    uint64_t data_sum = 0;</div>
<div class="line">    uint64_t ctx_sum = 0;</div>
<div class="line">    uint64_t uarea_sum = 0;</div>
<div class="line">    uint64_t wait_ns = test_options-&gt;wait_ns;</div>
<div class="line">    <a class="code" href="struct__odp__abi__event__t.html">odp_event_t</a> ev[max_burst];</div>
<div class="line"> </div>
<div class="line">    thr = <a class="code" href="group__odp__thread.html#gad6562e7320d48463715bbf15748ae360">odp_thread_id</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (forward || fairness)</div>
<div class="line">        ctx_offset = ROUNDUP(<span class="keyword">sizeof</span>(queue_context_t), 8);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (num_group &gt; 0) {</div>
<div class="line">        uint32_t num_join = test_options-&gt;num_join;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (num_join) {</div>
<div class="line">            <span class="keywordtype">int</span> pos = 0;</div>
<div class="line">            <span class="keywordtype">int</span> n = 512;</div>
<div class="line">            <span class="keywordtype">char</span> str[n];</div>
<div class="line">            <span class="keywordtype">int</span> group_index = thread_arg-&gt;first_group;</div>
<div class="line"> </div>
<div class="line">            pos += snprintf(&amp;str[pos], n - pos,</div>
<div class="line">                    <span class="stringliteral">&quot;Thread %i joined groups:&quot;</span>, thr);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">for</span> (i = 0; i &lt; num_join; i++) {</div>
<div class="line">                <span class="keywordflow">if</span> (join_group(global, group_index, thr))</div>
<div class="line">                    <span class="keywordflow">return</span> -1;</div>
<div class="line"> </div>
<div class="line">                pos += snprintf(&amp;str[pos], n - pos, <span class="stringliteral">&quot; %i&quot;</span>,</div>
<div class="line">                        group_index);</div>
<div class="line"> </div>
<div class="line">                group_index = (group_index + 1) % num_group;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            printf(<span class="stringliteral">&quot;%s\n&quot;</span>, str);</div>
<div class="line"> </div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            <span class="keywordflow">if</span> (join_all_groups(global, thr))</div>
<div class="line">                <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; max_burst; i++)</div>
<div class="line">        ev[i] = <a class="code" href="group__odp__event.html#gae1a3732a534ba7a892fca38b824591b0">ODP_EVENT_INVALID</a>;</div>
<div class="line"> </div>
<div class="line">    enqueues = 0;</div>
<div class="line">    events = 0;</div>
<div class="line">    events_prev = 0;</div>
<div class="line">    waits = 0;</div>
<div class="line">    ret = 0;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Start all workers at the same time */</span></div>
<div class="line">    <a name="a95"></a><a class="code" href="group__odp__barrier.html#ga97c8f84490e816330f96155acf0b4b77">odp_barrier_wait</a>(&amp;global-&gt;barrier);</div>
<div class="line"> </div>
<div class="line">    t1 = <a name="a96"></a><a class="code" href="group__odp__time.html#ga5d0b24d7dae739bac7585ed515bd60a8">odp_time_local</a>();</div>
<div class="line">    c1 = <a name="a97"></a><a class="code" href="group__odp__cpu.html#ga1eddc2169c7e7d90f194054499a4548b">odp_cpu_cycles</a>();</div>
<div class="line">    last_retry_ts = t1;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (rounds = 0; <a name="a98"></a><a class="code" href="group__odp__compiler__optim.html#ga68d9a1bb3d2dcfdf476b2d9e16b89e4d">odp_likely</a>(!<a name="a99"></a><a class="code" href="group__odp__atomic.html#ga1ebc0fa6d690c24bd2bcc38bcb9a2276">odp_atomic_load_u32</a>(exit_threads)); rounds++) {</div>
<div class="line">        <span class="keywordflow">if</span> (<a name="a100"></a><a class="code" href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a>(num_sched &amp;&amp; events &gt;= num_sched))</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">        num = <a name="a101"></a><a class="code" href="group__odp__scheduler.html#ga34f1bae924466cc2b57563f8fe2dc0d1">odp_schedule_multi</a>(&amp;queue, <a name="a102"></a><a class="code" href="group__odp__scheduler.html#ga9116776b8262a74af7dac7ef46fc7ace">ODP_SCHED_NO_WAIT</a>,</div>
<div class="line">                     ev, max_burst);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__odp__compiler__optim.html#ga68d9a1bb3d2dcfdf476b2d9e16b89e4d">odp_likely</a>(num &gt; 0)) {</div>
<div class="line">            sched_retries = 0;</div>
<div class="line">            events += num;</div>
<div class="line">            i = 0;</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (<a class="code" href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a>(uarea_size))</div>
<div class="line">                uarea_sum += rw_uarea(ev, num, uarea_rd, uarea_rw);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (<a class="code" href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a>(ctx_size)) {</div>
<div class="line">                queue_context_t *ctx = <a class="code" href="group__odp__queue.html#ga96ab88617101283b30ba784c9c9e7367">odp_queue_context</a>(queue);</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">if</span> (forward)</div>
<div class="line">                    queue = ctx-&gt;next;</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">if</span> (fairness)</div>
<div class="line">                    <a name="a103"></a><a class="code" href="group__odp__atomic.html#gad8d0b05d2773ce8df05b60c5dee9d54f">odp_atomic_add_u64</a>(&amp;ctx-&gt;count, num);</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">if</span> (<a class="code" href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a>(touch_ctx))</div>
<div class="line">                    ctx_sum += rw_ctx_data(ctx, ctx_offset,</div>
<div class="line">                                   ctx_rd_words,</div>
<div class="line">                                   ctx_rw_words);</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (<a class="code" href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a>(touch_data)) {</div>
<div class="line">                <span class="keywordflow">if</span> (stress) {</div>
<div class="line">                    data_sum += rw_data_stress(ev, num, rd_words, rw_words,</div>
<div class="line">                                   stress, pool_type);</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                    data_sum += rw_data(ev, num, rd_words, rw_words, pool_type);</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (<a class="code" href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a>(wait_ns)) {</div>
<div class="line">                waits++;</div>
<div class="line">                <a name="a104"></a><a class="code" href="group__odp__time.html#ga506b0234dfdd7c0dc98d6acd27d57f8a">odp_time_wait_ns</a>(wait_ns);</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">while</span> (num) {</div>
<div class="line">                num_enq = <a name="a105"></a><a class="code" href="group__odp__queue.html#ga6b3ef7c0d52f9dd31e534b9cf17eb218">odp_queue_enq_multi</a>(queue, &amp;ev[i],</div>
<div class="line">                                  num);</div>
<div class="line"> </div>
<div class="line">                <span class="keywordflow">if</span> (num_enq &lt; 0) {</div>
<div class="line">                    printf(<span class="stringliteral">&quot;Error: Enqueue failed. Round %u\n&quot;</span>,</div>
<div class="line">                           rounds);</div>
<div class="line">                    <a name="a106"></a><a class="code" href="group__odp__event.html#ga0c1fddf7c1f6ca33b7a28aa0690f7cc0">odp_event_free_multi</a>(&amp;ev[i], num);</div>
<div class="line">                    ret = -1;</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line"> </div>
<div class="line">                num -= num_enq;</div>
<div class="line">                i   += num_enq;</div>
<div class="line">                enqueues++;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (<a class="code" href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a>(ret))</div>
<div class="line">                <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (num == 0) {</div>
<div class="line">            sched_retries++;</div>
<div class="line">            <span class="keywordflow">if</span> (<a class="code" href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a>(sched_retries &gt; TIME_CHECK_INTERVAL)) {</div>
<div class="line">                <a class="code" href="structodp__time__t.html">odp_time_t</a> cur_time = <a class="code" href="group__odp__time.html#ga5d0b24d7dae739bac7585ed515bd60a8">odp_time_local</a>();</div>
<div class="line"> </div>
<div class="line">                <span class="comment">/* Measure time from the last received event and</span></div>
<div class="line"><span class="comment">                 * break if MAX_SCHED_WAIT_NS is exceeded */</span></div>
<div class="line">                sched_retries = 0;</div>
<div class="line">                <span class="keywordflow">if</span> (events_prev != events) {</div>
<div class="line">                    events_prev = events;</div>
<div class="line">                    last_retry_ts = cur_time;</div>
<div class="line">                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a name="a107"></a><a class="code" href="group__odp__time.html#gada453827b812a8fae651e9d93308e959">odp_time_diff_ns</a>(cur_time,</div>
<div class="line">                                last_retry_ts) &gt;</div>
<div class="line">                        MAX_SCHED_WAIT_NS) {</div>
<div class="line">                    printf(<span class="stringliteral">&quot;Error: scheduling timed out\n&quot;</span>);</div>
<div class="line">                    ret = -1;</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* &lt;0 not specified as an error but checking anyway */</span></div>
<div class="line">        <span class="keywordflow">if</span> (num &lt; 0) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;Error: Sched failed. Round %u\n&quot;</span>, rounds);</div>
<div class="line">            ret = -1;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    c2 = <a class="code" href="group__odp__cpu.html#ga1eddc2169c7e7d90f194054499a4548b">odp_cpu_cycles</a>();</div>
<div class="line">    t2 = <a class="code" href="group__odp__time.html#ga5d0b24d7dae739bac7585ed515bd60a8">odp_time_local</a>();</div>
<div class="line"> </div>
<div class="line">    nsec   = <a class="code" href="group__odp__time.html#gada453827b812a8fae651e9d93308e959">odp_time_diff_ns</a>(t2, t1);</div>
<div class="line">    cycles = <a name="a108"></a><a class="code" href="group__odp__cpu.html#ga149b333a5075d5e542fbe42adbb84d65">odp_cpu_cycles_diff</a>(c2, c1);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Update stats*/</span></div>
<div class="line">    global-&gt;stat[thr].rounds   = rounds;</div>
<div class="line">    global-&gt;stat[thr].enqueues = enqueues;</div>
<div class="line">    global-&gt;stat[thr].events   = events;</div>
<div class="line">    global-&gt;stat[thr].nsec     = nsec;</div>
<div class="line">    global-&gt;stat[thr].cycles   = cycles;</div>
<div class="line">    global-&gt;stat[thr].waits    = waits;</div>
<div class="line">    global-&gt;stat[thr].dummy_sum = data_sum + ctx_sum + uarea_sum;</div>
<div class="line">    global-&gt;stat[thr].failed = ret;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a109"></a><a class="code" href="group__odp__atomic.html#gac84cb77c8a0d6ab0a073d0b9ebc99e9f">odp_atomic_fetch_dec_u32</a>(&amp;global-&gt;num_worker) == 1) {</div>
<div class="line">        <span class="comment">/* The last worker frees all events. This is needed when the main</span></div>
<div class="line"><span class="comment">         * thread cannot do the clean up (ODP_SCHED_GROUP_WORKER). */</span></div>
<div class="line">        <a class="code" href="struct__odp__abi__event__t.html">odp_event_t</a> event;</div>
<div class="line">        uint64_t sched_wait = <a class="code" href="group__odp__scheduler.html#gab0a0d2673cc7371d5c5d782d13a485b8">odp_schedule_wait_time</a>(200 * <a class="code" href="group__odp__time.html#gabad65a44847cb6d46c2ae9cc96a80a4c">ODP_TIME_MSEC_IN_NS</a>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Print queue and scheduler status at the end of the test, before any queues</span></div>
<div class="line"><span class="comment">         * are emptied or destroyed. */</span></div>
<div class="line">        <span class="keywordflow">if</span> (test_options-&gt;verbose) {</div>
<div class="line">            <a name="a110"></a><a class="code" href="group__odp__queue.html#gaa9dcb65fb0e9f75360156b815dda528d">odp_queue_print_all</a>();</div>
<div class="line">            <a name="a111"></a><a class="code" href="group__odp__scheduler.html#gae92168433885df11eed3d22040b68e38">odp_schedule_print</a>();</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">while</span> ((event = <a class="code" href="group__odp__scheduler.html#gae4ca1012ebb16ff8b9752b958dc45ce6">odp_schedule</a>(NULL, sched_wait)) != <a class="code" href="group__odp__event.html#gae1a3732a534ba7a892fca38b824591b0">ODP_EVENT_INVALID</a>)</div>
<div class="line">            <a class="code" href="group__odp__event.html#ga1622f73356c325f625db747cb3badf8d">odp_event_free</a>(event);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Pause scheduling before thread exit */</span></div>
<div class="line">    <a name="a112"></a><a class="code" href="group__odp__scheduler.html#ga9868ccb25b6631ef29cc921ee2e522b0">odp_schedule_pause</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (1) {</div>
<div class="line">        ev[0] = <a class="code" href="group__odp__scheduler.html#gae4ca1012ebb16ff8b9752b958dc45ce6">odp_schedule</a>(&amp;queue, <a class="code" href="group__odp__scheduler.html#ga9116776b8262a74af7dac7ef46fc7ace">ODP_SCHED_NO_WAIT</a>);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (ev[0] == <a class="code" href="group__odp__event.html#gae1a3732a534ba7a892fca38b824591b0">ODP_EVENT_INVALID</a>)</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a>(forward))</div>
<div class="line">            queue = ((queue_context_t *)<a class="code" href="group__odp__queue.html#ga96ab88617101283b30ba784c9c9e7367">odp_queue_context</a>(queue))-&gt;next;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="group__odp__queue.html#ga985c2e5219f65c270b50578c16ec9d61">odp_queue_enq</a>(queue, ev[0])) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;Error: Queue enqueue failed\n&quot;</span>);</div>
<div class="line">            <a class="code" href="group__odp__event.html#ga1622f73356c325f625db747cb3badf8d">odp_event_free</a>(ev[0]);</div>
<div class="line">            ret = -1;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> ret;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> start_workers(test_global_t *global, <a class="code" href="group__odp__initialization.html#ga8d362bd3c7c87ab5892ca63b15c375c0">odp_instance_t</a> instance)</div>
<div class="line">{</div>
<div class="line">    odph_thread_common_param_t thr_common;</div>
<div class="line">    <span class="keywordtype">int</span> i, ret;</div>
<div class="line">    test_options_t *test_options = &amp;global-&gt;test_options;</div>
<div class="line">    <span class="keywordtype">int</span> num_group = test_options-&gt;num_group;</div>
<div class="line">    uint32_t num_join  = test_options-&gt;num_join;</div>
<div class="line">    <span class="keywordtype">int</span> num_cpu   = test_options-&gt;num_cpu;</div>
<div class="line">    odph_thread_param_t thr_param[num_cpu];</div>
<div class="line"> </div>
<div class="line">    <a name="a113"></a><a class="code" href="group__odp__atomic.html#ga0029015adacaadb06ee94ea67d00eece">odp_atomic_init_u32</a>(&amp;global-&gt;num_worker, num_cpu);</div>
<div class="line"> </div>
<div class="line">    memset(global-&gt;thread_tbl, 0, <span class="keyword">sizeof</span>(global-&gt;thread_tbl));</div>
<div class="line">    odph_thread_common_param_init(&amp;thr_common);</div>
<div class="line"> </div>
<div class="line">    thr_common.instance = instance;</div>
<div class="line">    thr_common.cpumask  = &amp;global-&gt;cpumask;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; num_cpu; i++) {</div>
<div class="line">        odph_thread_param_init(&amp;thr_param[i]);</div>
<div class="line">        thr_param[i].start    = test_sched;</div>
<div class="line">        thr_param[i].arg      = &amp;global-&gt;thread_arg[i];</div>
<div class="line">        thr_param[i].thr_type = <a name="a114"></a><a class="code" href="group__odp__thread.html#ggafc7a7c180de9811d71b7cb050713bf53a2182066d714db5f2a4e994ad92f25b2a">ODP_THREAD_WORKER</a>;</div>
<div class="line"> </div>
<div class="line">        global-&gt;thread_arg[i].global = global;</div>
<div class="line">        global-&gt;thread_arg[i].first_group = 0;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (num_group &gt; 0 &amp;&amp; num_join) {</div>
<div class="line">            <span class="comment">/* Each thread joins only num_join groups, starting</span></div>
<div class="line"><span class="comment">             * from this group index and wrapping around the group</span></div>
<div class="line"><span class="comment">             * table. */</span></div>
<div class="line">            <span class="keywordtype">int</span> first_group = (i * num_join) % num_group;</div>
<div class="line"> </div>
<div class="line">            global-&gt;thread_arg[i].first_group = first_group;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    ret = odph_thread_create(global-&gt;thread_tbl, &amp;thr_common, thr_param,</div>
<div class="line">                 num_cpu);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (ret != num_cpu) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Error: thread create failed %i\n&quot;</span>, ret);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">double</span> measure_wait_time_cycles(uint64_t wait_ns)</div>
<div class="line">{</div>
<div class="line">    uint64_t i, c1, c2, diff;</div>
<div class="line">    uint64_t rounds;</div>
<div class="line">    <span class="keywordtype">double</span> wait_cycles;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (wait_ns == 0)</div>
<div class="line">        <span class="keywordflow">return</span> 0.0;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Run measurement for 100msec or at least two times, so that effect</span></div>
<div class="line"><span class="comment">     * from CPU frequency scaling is minimized. */</span></div>
<div class="line">    rounds = (100 * <a class="code" href="group__odp__time.html#gabad65a44847cb6d46c2ae9cc96a80a4c">ODP_TIME_MSEC_IN_NS</a>) / wait_ns;</div>
<div class="line">    <span class="keywordflow">if</span> (rounds == 0)</div>
<div class="line">        rounds = 2;</div>
<div class="line"> </div>
<div class="line">    c1 = <a class="code" href="group__odp__cpu.html#ga1eddc2169c7e7d90f194054499a4548b">odp_cpu_cycles</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; rounds; i++)</div>
<div class="line">        <a class="code" href="group__odp__time.html#ga506b0234dfdd7c0dc98d6acd27d57f8a">odp_time_wait_ns</a>(wait_ns);</div>
<div class="line"> </div>
<div class="line">    c2 = <a class="code" href="group__odp__cpu.html#ga1eddc2169c7e7d90f194054499a4548b">odp_cpu_cycles</a>();</div>
<div class="line">    diff = <a class="code" href="group__odp__cpu.html#ga149b333a5075d5e542fbe42adbb84d65">odp_cpu_cycles_diff</a>(c2, c1);</div>
<div class="line">    wait_cycles = (double)diff / rounds;</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;\nMeasured wait cycles: %.3f\n&quot;</span>, wait_cycles);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> wait_cycles;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> print_stat(test_global_t *global)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> i, num;</div>
<div class="line">    <span class="keywordtype">double</span> rounds_ave, enqueues_ave, events_ave, nsec_ave, cycles_ave;</div>
<div class="line">    <span class="keywordtype">double</span> waits_ave, wait_cycles, wait_cycles_ave;</div>
<div class="line">    test_options_t *test_options = &amp;global-&gt;test_options;</div>
<div class="line">    <span class="keywordtype">int</span> num_cpu = test_options-&gt;num_cpu;</div>
<div class="line">    uint64_t wait_ns = test_options-&gt;wait_ns;</div>
<div class="line">    uint64_t rounds_sum = 0;</div>
<div class="line">    uint64_t enqueues_sum = 0;</div>
<div class="line">    uint64_t events_sum = 0;</div>
<div class="line">    uint64_t nsec_sum = 0;</div>
<div class="line">    uint64_t cycles_sum = 0;</div>
<div class="line">    uint64_t waits_sum = 0;</div>
<div class="line"> </div>
<div class="line">    wait_cycles = measure_wait_time_cycles(wait_ns);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Averages */</span></div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="group__odp__thread.html#ga0c7b70f32643b51e1ea09352183c50bf">ODP_THREAD_COUNT_MAX</a>; i++) {</div>
<div class="line">        <span class="keywordflow">if</span> (global-&gt;stat[i].failed) {</div>
<div class="line">            num_cpu--;</div>
<div class="line">            <span class="keywordflow">continue</span>;</div>
<div class="line">        }</div>
<div class="line">        rounds_sum   += global-&gt;stat[i].rounds;</div>
<div class="line">        enqueues_sum += global-&gt;stat[i].enqueues;</div>
<div class="line">        events_sum   += global-&gt;stat[i].events;</div>
<div class="line">        nsec_sum     += global-&gt;stat[i].nsec;</div>
<div class="line">        cycles_sum   += global-&gt;stat[i].cycles;</div>
<div class="line">        waits_sum    += global-&gt;stat[i].waits;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (rounds_sum == 0 || num_cpu &lt;= 0) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;No results.\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    rounds_ave   = rounds_sum / num_cpu;</div>
<div class="line">    enqueues_ave = enqueues_sum / num_cpu;</div>
<div class="line">    events_ave   = events_sum / num_cpu;</div>
<div class="line">    nsec_ave     = nsec_sum / num_cpu;</div>
<div class="line">    cycles_ave   = cycles_sum / num_cpu;</div>
<div class="line">    waits_ave    = waits_sum / num_cpu;</div>
<div class="line">    wait_cycles_ave = waits_ave * wait_cycles;</div>
<div class="line">    num = 0;</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;RESULTS - per thread (Million events per sec):\n&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;----------------------------------------------\n&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;        1      2      3      4      5      6      7      8      9     10&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="group__odp__thread.html#ga0c7b70f32643b51e1ea09352183c50bf">ODP_THREAD_COUNT_MAX</a>; i++) {</div>
<div class="line">        <span class="keywordflow">if</span> (global-&gt;stat[i].rounds) {</div>
<div class="line">            <span class="keywordflow">if</span> ((num % 10) == 0)</div>
<div class="line">                printf(<span class="stringliteral">&quot;\n   &quot;</span>);</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (global-&gt;stat[i].failed)</div>
<div class="line">                printf(<span class="stringliteral">&quot;   n/a &quot;</span>);</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">                printf(<span class="stringliteral">&quot;%6.1f &quot;</span>,</div>
<div class="line">                       (1000.0 * global-&gt;stat[i].events) /</div>
<div class="line">                       global-&gt;stat[i].nsec);</div>
<div class="line"> </div>
<div class="line">            num++;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    printf(<span class="stringliteral">&quot;\n\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;RESULTS - average over %i threads:\n&quot;</span>, num_cpu);</div>
<div class="line">    printf(<span class="stringliteral">&quot;----------------------------------\n&quot;</span>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;  schedule calls:           %.3f\n&quot;</span>, rounds_ave);</div>
<div class="line">    printf(<span class="stringliteral">&quot;  enqueue calls:            %.3f\n&quot;</span>, enqueues_ave);</div>
<div class="line">    printf(<span class="stringliteral">&quot;  duration:                 %.3f msec\n&quot;</span>, nsec_ave / 1000000);</div>
<div class="line">    printf(<span class="stringliteral">&quot;  num cycles:               %.3f M\n&quot;</span>, cycles_ave / 1000000);</div>
<div class="line">    printf(<span class="stringliteral">&quot;  cycles per round:         %.3f\n&quot;</span>,</div>
<div class="line">           cycles_ave / rounds_ave);</div>
<div class="line">    printf(<span class="stringliteral">&quot;  cycles per event:         %.3f\n&quot;</span>,</div>
<div class="line">           cycles_ave / events_ave);</div>
<div class="line">    <span class="keywordflow">if</span> (wait_ns) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;    without wait_ns cycles: %.3f\n&quot;</span>,</div>
<div class="line">               (cycles_ave - wait_cycles_ave) / events_ave);</div>
<div class="line">    }</div>
<div class="line">    printf(<span class="stringliteral">&quot;  ave events received:      %.3f\n&quot;</span>,</div>
<div class="line">           events_ave / rounds_ave);</div>
<div class="line">    printf(<span class="stringliteral">&quot;  rounds per sec:           %.3f M\n&quot;</span>,</div>
<div class="line">           (1000.0 * rounds_ave) / nsec_ave);</div>
<div class="line">    printf(<span class="stringliteral">&quot;  events per sec:           %.3f M\n\n&quot;</span>,</div>
<div class="line">           (1000.0 * events_ave) / nsec_ave);</div>
<div class="line"> </div>
<div class="line">    printf(<span class="stringliteral">&quot;TOTAL events per sec:       %.3f M\n\n&quot;</span>,</div>
<div class="line">           (1000.0 * events_sum) / nsec_ave);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div>
<div class="line">{</div>
<div class="line">    odph_helper_options_t helper_options;</div>
<div class="line">    <a class="code" href="group__odp__initialization.html#ga8d362bd3c7c87ab5892ca63b15c375c0">odp_instance_t</a> instance;</div>
<div class="line">    <a name="_a115"></a><a class="code" href="structodp__init__t.html">odp_init_t</a> init;</div>
<div class="line">    <a class="code" href="struct__odp__abi__shm__t.html">odp_shm_t</a> shm;</div>
<div class="line">    test_global_t *global;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Let helper collect its own arguments (e.g. --odph_proc) */</span></div>
<div class="line">    argc = odph_parse_options(argc, argv);</div>
<div class="line">    <span class="keywordflow">if</span> (odph_options(&amp;helper_options)) {</div>
<div class="line">        ODPH_ERR(<span class="stringliteral">&quot;Error: Reading ODP helper options failed.\n&quot;</span>);</div>
<div class="line">        exit(EXIT_FAILURE);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* List features not to be used */</span></div>
<div class="line">    <a name="a116"></a><a class="code" href="group__odp__initialization.html#ga145c4fc4417c8f58efd0852b34e25ba9">odp_init_param_init</a>(&amp;init);</div>
<div class="line">    init.<a name="a117"></a><a class="code" href="structodp__init__t.html#aa359196a1801c0ca15a88af32de71d46">not_used</a>.<a name="a118"></a><a class="code" href="unionodp__feature__t.html#a0e52579082f2f9874c343d01f30822da">feat</a>.<a name="a119"></a><a class="code" href="unionodp__feature__t.html#a88403beab239078f0b99ced6a9e55a8b">cls</a>      = 1;</div>
<div class="line">    init.<a class="code" href="structodp__init__t.html#aa359196a1801c0ca15a88af32de71d46">not_used</a>.<a class="code" href="unionodp__feature__t.html#a0e52579082f2f9874c343d01f30822da">feat</a>.<a name="a120"></a><a class="code" href="unionodp__feature__t.html#afa5de6ea31695f0c1fd33773612aefcc">compress</a> = 1;</div>
<div class="line">    init.<a class="code" href="structodp__init__t.html#aa359196a1801c0ca15a88af32de71d46">not_used</a>.<a class="code" href="unionodp__feature__t.html#a0e52579082f2f9874c343d01f30822da">feat</a>.<a name="a121"></a><a class="code" href="unionodp__feature__t.html#a1bdda287098ded64503078051a83f926">crypto</a>   = 1;</div>
<div class="line">    init.<a class="code" href="structodp__init__t.html#aa359196a1801c0ca15a88af32de71d46">not_used</a>.<a class="code" href="unionodp__feature__t.html#a0e52579082f2f9874c343d01f30822da">feat</a>.<a name="a122"></a><a class="code" href="unionodp__feature__t.html#a2c1ba6ec10b80be331770a6d1343c022">ipsec</a>    = 1;</div>
<div class="line">    init.<a class="code" href="structodp__init__t.html#aa359196a1801c0ca15a88af32de71d46">not_used</a>.<a class="code" href="unionodp__feature__t.html#a0e52579082f2f9874c343d01f30822da">feat</a>.<a name="a123"></a><a class="code" href="unionodp__feature__t.html#a8385b58720b831b5c74ed0caf2e81ce0">timer</a>    = 1;</div>
<div class="line">    init.<a class="code" href="structodp__init__t.html#aa359196a1801c0ca15a88af32de71d46">not_used</a>.<a class="code" href="unionodp__feature__t.html#a0e52579082f2f9874c343d01f30822da">feat</a>.<a name="a124"></a><a class="code" href="unionodp__feature__t.html#a1314788ea1f1ed5880993df313efa537">tm</a>       = 1;</div>
<div class="line"> </div>
<div class="line">    init.<a name="a125"></a><a class="code" href="structodp__init__t.html#a7d368c740146170ebeb1651ce049919e">mem_model</a> = helper_options.mem_model;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Init ODP before calling anything else */</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a126"></a><a class="code" href="group__odp__initialization.html#ga68d81088e65ef66180fb51076905e34d">odp_init_global</a>(&amp;instance, &amp;init, NULL)) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Error: Global init failed.\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Init this thread */</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a127"></a><a class="code" href="group__odp__initialization.html#ga265470ea614bfeca9d8901e81ddefca9">odp_init_local</a>(instance, <a name="a128"></a><a class="code" href="group__odp__thread.html#ggafc7a7c180de9811d71b7cb050713bf53a9aab3fdb10eb2000a864bff81f23c00a">ODP_THREAD_CONTROL</a>)) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Error: Local init failed.\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    shm = <a name="a129"></a><a class="code" href="group__odp__shared__memory.html#gacc441b0e100ec1c54e21f1745939a2d8">odp_shm_reserve</a>(<span class="stringliteral">&quot;sched_perf_global&quot;</span>, <span class="keyword">sizeof</span>(test_global_t), ODP_CACHE_LINE_SIZE, 0);</div>
<div class="line">    <span class="keywordflow">if</span> (shm == <a name="a130"></a><a class="code" href="group__odp__shared__memory.html#ga6e4289975efc279bb9f31880613a9d60">ODP_SHM_INVALID</a>) {</div>
<div class="line">        ODPH_ERR(<span class="stringliteral">&quot;Error: SHM reserve failed.\n&quot;</span>);</div>
<div class="line">        exit(EXIT_FAILURE);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    global = <a class="code" href="group__odp__shared__memory.html#gac94c4232f7cd64039bbaef601ff2c05e">odp_shm_addr</a>(shm);</div>
<div class="line">    <span class="keywordflow">if</span> (global == NULL) {</div>
<div class="line">        ODPH_ERR(<span class="stringliteral">&quot;Error: SHM alloc failed\n&quot;</span>);</div>
<div class="line">        exit(EXIT_FAILURE);</div>
<div class="line">    }</div>
<div class="line">    test_globals = global;</div>
<div class="line"> </div>
<div class="line">    memset(global, 0, <span class="keyword">sizeof</span>(test_global_t));</div>
<div class="line">    global-&gt;pool = <a class="code" href="group__odp__pool.html#gafca03b58412260da754042a92f8a5e04">ODP_POOL_INVALID</a>;</div>
<div class="line">    global-&gt;ctx_shm = <a class="code" href="group__odp__shared__memory.html#ga6e4289975efc279bb9f31880613a9d60">ODP_SHM_INVALID</a>;</div>
<div class="line">    <a class="code" href="group__odp__atomic.html#ga0029015adacaadb06ee94ea67d00eece">odp_atomic_init_u32</a>(&amp;global-&gt;exit_threads, 0);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (setup_sig_handler()) {</div>
<div class="line">        ODPH_ERR(<span class="stringliteral">&quot;Error: signal handler setup failed\n&quot;</span>);</div>
<div class="line">        exit(EXIT_FAILURE);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (parse_options(argc, argv, &amp;global-&gt;test_options))</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line"> </div>
<div class="line">    <a name="a131"></a><a class="code" href="group__odp__system.html#gab0a1cd5e503d5ec067e8d17d228b937d">odp_sys_info_print</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (global-&gt;test_options.ctx_size) {</div>
<div class="line">        uint64_t size = (uint64_t)global-&gt;test_options.ctx_size *</div>
<div class="line">                global-&gt;test_options.tot_queue;</div>
<div class="line"> </div>
<div class="line">        global-&gt;ctx_shm = <a class="code" href="group__odp__shared__memory.html#gacc441b0e100ec1c54e21f1745939a2d8">odp_shm_reserve</a>(<span class="stringliteral">&quot;queue contexts&quot;</span>, size,</div>
<div class="line">                          ODP_CACHE_LINE_SIZE, 0);</div>
<div class="line">        <span class="keywordflow">if</span> (global-&gt;ctx_shm == <a class="code" href="group__odp__shared__memory.html#ga6e4289975efc279bb9f31880613a9d60">ODP_SHM_INVALID</a>) {</div>
<div class="line">            printf(<span class="stringliteral">&quot;Error: SHM reserve %&quot;</span> PRIu64 <span class="stringliteral">&quot; bytes failed\n&quot;</span>,</div>
<div class="line">                   size);</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a name="a132"></a><a class="code" href="group__odp__scheduler.html#ga3f3af33a2a42b3a9d6e5e3f74bfcb03d">odp_schedule_config_init</a>(&amp;global-&gt;schedule_config);</div>
<div class="line">    <a name="a133"></a><a class="code" href="group__odp__scheduler.html#gaa1b51ebd46adeb6aa7805fccb00144df">odp_schedule_config</a>(&amp;global-&gt;schedule_config);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (set_num_cpu(global))</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (create_pool(global))</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (create_groups(global))</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (create_queues(global))</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (global-&gt;test_options.verbose)</div>
<div class="line">        <a name="a134"></a><a class="code" href="group__odp__shared__memory.html#ga0257a416aacd98f9a25dd0685518c553">odp_shm_print_all</a>();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Start workers */</span></div>
<div class="line">    start_workers(global, instance);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Wait workers to exit */</span></div>
<div class="line">    odph_thread_join(global-&gt;thread_tbl, global-&gt;test_options.num_cpu);</div>
<div class="line"> </div>
<div class="line">    print_queue_fairness(global);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (destroy_queues(global))</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (destroy_groups(global))</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line"> </div>
<div class="line">    print_stat(global);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a135"></a><a class="code" href="group__odp__pool.html#ga6ad439aaef911d82b972c915850e6924">odp_pool_destroy</a>(global-&gt;pool)) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Error: Pool destroy failed.\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (global-&gt;ctx_shm != <a class="code" href="group__odp__shared__memory.html#ga6e4289975efc279bb9f31880613a9d60">ODP_SHM_INVALID</a>)</div>
<div class="line">        <a name="a136"></a><a class="code" href="group__odp__shared__memory.html#ga0b02991b512acc119206b44c95a86ed6">odp_shm_free</a>(global-&gt;ctx_shm);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="group__odp__shared__memory.html#ga0b02991b512acc119206b44c95a86ed6">odp_shm_free</a>(shm)) {</div>
<div class="line">        ODPH_ERR(<span class="stringliteral">&quot;Error: SHM free failed.\n&quot;</span>);</div>
<div class="line">        exit(EXIT_FAILURE);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a137"></a><a class="code" href="group__odp__initialization.html#ga6d15f0e1718da9477948dedb06a2f01a">odp_term_local</a>()) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Error: term local failed.\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<a name="a138"></a><a class="code" href="group__odp__initialization.html#ga87e9c66ad92201c9e0a710294eab1569">odp_term_global</a>(instance)) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;Error: term global failed.\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="agroup__odp__atomic_html_ga0029015adacaadb06ee94ea67d00eece"><div class="ttname"><a href="group__odp__atomic.html#ga0029015adacaadb06ee94ea67d00eece">odp_atomic_init_u32</a></div><div class="ttdeci">void odp_atomic_init_u32(odp_atomic_u32_t *atom, uint32_t val)</div><div class="ttdoc">Initialize atomic uint32 variable.</div></div>
<div class="ttc" id="agroup__odp__atomic_html_ga1ebc0fa6d690c24bd2bcc38bcb9a2276"><div class="ttname"><a href="group__odp__atomic.html#ga1ebc0fa6d690c24bd2bcc38bcb9a2276">odp_atomic_load_u32</a></div><div class="ttdeci">uint32_t odp_atomic_load_u32(odp_atomic_u32_t *atom)</div><div class="ttdoc">Load value of atomic uint32 variable.</div></div>
<div class="ttc" id="agroup__odp__atomic_html_ga325f41ac9f4b2220d0562e91dbaafc86"><div class="ttname"><a href="group__odp__atomic.html#ga325f41ac9f4b2220d0562e91dbaafc86">odp_atomic_init_u64</a></div><div class="ttdeci">void odp_atomic_init_u64(odp_atomic_u64_t *atom, uint64_t val)</div><div class="ttdoc">Initialize atomic uint64 variable.</div></div>
<div class="ttc" id="agroup__odp__atomic_html_gaa6d2d16a9ef9897b1442d77e41f7101e"><div class="ttname"><a href="group__odp__atomic.html#gaa6d2d16a9ef9897b1442d77e41f7101e">odp_atomic_store_u32</a></div><div class="ttdeci">void odp_atomic_store_u32(odp_atomic_u32_t *atom, uint32_t val)</div><div class="ttdoc">Store value to atomic uint32 variable.</div></div>
<div class="ttc" id="agroup__odp__atomic_html_gac84cb77c8a0d6ab0a073d0b9ebc99e9f"><div class="ttname"><a href="group__odp__atomic.html#gac84cb77c8a0d6ab0a073d0b9ebc99e9f">odp_atomic_fetch_dec_u32</a></div><div class="ttdeci">uint32_t odp_atomic_fetch_dec_u32(odp_atomic_u32_t *atom)</div><div class="ttdoc">Fetch and decrement atomic uint32 variable.</div></div>
<div class="ttc" id="agroup__odp__atomic_html_gad8d0b05d2773ce8df05b60c5dee9d54f"><div class="ttname"><a href="group__odp__atomic.html#gad8d0b05d2773ce8df05b60c5dee9d54f">odp_atomic_add_u64</a></div><div class="ttdeci">void odp_atomic_add_u64(odp_atomic_u64_t *atom, uint64_t val)</div><div class="ttdoc">Add to atomic uint64 variable.</div></div>
<div class="ttc" id="agroup__odp__atomic_html_gafe63805cc280307e31478439280537e2"><div class="ttname"><a href="group__odp__atomic.html#gafe63805cc280307e31478439280537e2">odp_atomic_load_u64</a></div><div class="ttdeci">uint64_t odp_atomic_load_u64(odp_atomic_u64_t *atom)</div><div class="ttdoc">Load value of atomic uint64 variable.</div></div>
<div class="ttc" id="agroup__odp__barrier_html_ga1416b47755c2af6267074959ac0d4840"><div class="ttname"><a href="group__odp__barrier.html#ga1416b47755c2af6267074959ac0d4840">odp_barrier_init</a></div><div class="ttdeci">void odp_barrier_init(odp_barrier_t *barr, int count)</div><div class="ttdoc">Initialize barrier with thread count.</div></div>
<div class="ttc" id="agroup__odp__barrier_html_ga97c8f84490e816330f96155acf0b4b77"><div class="ttname"><a href="group__odp__barrier.html#ga97c8f84490e816330f96155acf0b4b77">odp_barrier_wait</a></div><div class="ttdeci">void odp_barrier_wait(odp_barrier_t *barr)</div><div class="ttdoc">Synchronize thread execution on barrier.</div></div>
<div class="ttc" id="agroup__odp__buffer_html_ga1125de5fd93c058a7034cf7789b60c0c"><div class="ttname"><a href="group__odp__buffer.html#ga1125de5fd93c058a7034cf7789b60c0c">odp_buffer_size</a></div><div class="ttdeci">uint32_t odp_buffer_size(odp_buffer_t buf)</div><div class="ttdoc">Buffer maximum data size.</div></div>
<div class="ttc" id="agroup__odp__buffer_html_ga2a0acbcbd9f727d292b9ae248f82699f"><div class="ttname"><a href="group__odp__buffer.html#ga2a0acbcbd9f727d292b9ae248f82699f">odp_buffer_to_event</a></div><div class="ttdeci">odp_event_t odp_buffer_to_event(odp_buffer_t buf)</div><div class="ttdoc">Convert buffer handle to event.</div></div>
<div class="ttc" id="agroup__odp__buffer_html_ga2d7e4d7385b794f5016c000a94361dbd"><div class="ttname"><a href="group__odp__buffer.html#ga2d7e4d7385b794f5016c000a94361dbd">odp_buffer_alloc</a></div><div class="ttdeci">odp_buffer_t odp_buffer_alloc(odp_pool_t pool)</div><div class="ttdoc">Buffer alloc.</div></div>
<div class="ttc" id="agroup__odp__buffer_html_ga48f34caa699db93599513ffc14ba0dd2"><div class="ttname"><a href="group__odp__buffer.html#ga48f34caa699db93599513ffc14ba0dd2">odp_buffer_addr</a></div><div class="ttdeci">void * odp_buffer_addr(odp_buffer_t buf)</div><div class="ttdoc">Buffer start address.</div></div>
<div class="ttc" id="agroup__odp__buffer_html_ga8a6c336128e5cba2380603e6067544f0"><div class="ttname"><a href="group__odp__buffer.html#ga8a6c336128e5cba2380603e6067544f0">odp_buffer_from_event</a></div><div class="ttdeci">odp_buffer_t odp_buffer_from_event(odp_event_t ev)</div><div class="ttdoc">Get buffer handle from event.</div></div>
<div class="ttc" id="agroup__odp__buffer_html_gabdd0bdf9a225e7fca8d3bdd3d717adda"><div class="ttname"><a href="group__odp__buffer.html#gabdd0bdf9a225e7fca8d3bdd3d717adda">ODP_BUFFER_INVALID</a></div><div class="ttdeci">#define ODP_BUFFER_INVALID</div><div class="ttdoc">Invalid buffer.</div></div>
<div class="ttc" id="agroup__odp__compiler__optim_html_ga2b29f27f12b751250b471aa9c14c57c8"><div class="ttname"><a href="group__odp__compiler__optim.html#ga2b29f27f12b751250b471aa9c14c57c8">odp_unlikely</a></div><div class="ttdeci">#define odp_unlikely(x)</div><div class="ttdoc">Branch unlikely taken.</div><div class="ttdef"><b>Definition:</b> <a href="spec_2hints_8h_source.html#l00064">spec/hints.h:64</a></div></div>
<div class="ttc" id="agroup__odp__compiler__optim_html_ga45a2684e38da3e71b300bc89de5d6b52"><div class="ttname"><a href="group__odp__compiler__optim.html#ga45a2684e38da3e71b300bc89de5d6b52">ODP_UNUSED</a></div><div class="ttdeci">#define ODP_UNUSED</div><div class="ttdoc">Intentionally unused variables of functions.</div><div class="ttdef"><b>Definition:</b> <a href="spec_2hints_8h_source.html#l00054">spec/hints.h:54</a></div></div>
<div class="ttc" id="agroup__odp__compiler__optim_html_ga68d9a1bb3d2dcfdf476b2d9e16b89e4d"><div class="ttname"><a href="group__odp__compiler__optim.html#ga68d9a1bb3d2dcfdf476b2d9e16b89e4d">odp_likely</a></div><div class="ttdeci">#define odp_likely(x)</div><div class="ttdoc">Branch likely taken.</div><div class="ttdef"><b>Definition:</b> <a href="spec_2hints_8h_source.html#l00059">spec/hints.h:59</a></div></div>
<div class="ttc" id="agroup__odp__cpu_html_ga149b333a5075d5e542fbe42adbb84d65"><div class="ttname"><a href="group__odp__cpu.html#ga149b333a5075d5e542fbe42adbb84d65">odp_cpu_cycles_diff</a></div><div class="ttdeci">uint64_t odp_cpu_cycles_diff(uint64_t c2, uint64_t c1)</div><div class="ttdoc">CPU cycle count difference.</div></div>
<div class="ttc" id="agroup__odp__cpu_html_ga1eddc2169c7e7d90f194054499a4548b"><div class="ttname"><a href="group__odp__cpu.html#ga1eddc2169c7e7d90f194054499a4548b">odp_cpu_cycles</a></div><div class="ttdeci">uint64_t odp_cpu_cycles(void)</div><div class="ttdoc">Current CPU cycle count.</div></div>
<div class="ttc" id="agroup__odp__cpumask_html_ga4ff2d29f52775b12c7df1995754b524d"><div class="ttname"><a href="group__odp__cpumask.html#ga4ff2d29f52775b12c7df1995754b524d">odp_cpumask_default_worker</a></div><div class="ttdeci">int odp_cpumask_default_worker(odp_cpumask_t *mask, int num)</div><div class="ttdoc">Default CPU mask for worker threads.</div></div>
<div class="ttc" id="agroup__odp__event_html_ga0c1fddf7c1f6ca33b7a28aa0690f7cc0"><div class="ttname"><a href="group__odp__event.html#ga0c1fddf7c1f6ca33b7a28aa0690f7cc0">odp_event_free_multi</a></div><div class="ttdeci">void odp_event_free_multi(const odp_event_t event[], int num)</div><div class="ttdoc">Free multiple events.</div></div>
<div class="ttc" id="agroup__odp__event_html_ga1622f73356c325f625db747cb3badf8d"><div class="ttname"><a href="group__odp__event.html#ga1622f73356c325f625db747cb3badf8d">odp_event_free</a></div><div class="ttdeci">void odp_event_free(odp_event_t event)</div><div class="ttdoc">Free event.</div></div>
<div class="ttc" id="agroup__odp__event_html_gaba75b0c7623ec78e3cf6f9b21494b220"><div class="ttname"><a href="group__odp__event.html#gaba75b0c7623ec78e3cf6f9b21494b220">odp_event_user_area</a></div><div class="ttdeci">void * odp_event_user_area(odp_event_t event)</div><div class="ttdoc">Event user area.</div></div>
<div class="ttc" id="agroup__odp__event_html_gae1a3732a534ba7a892fca38b824591b0"><div class="ttname"><a href="group__odp__event.html#gae1a3732a534ba7a892fca38b824591b0">ODP_EVENT_INVALID</a></div><div class="ttdeci">#define ODP_EVENT_INVALID</div><div class="ttdoc">Invalid event.</div></div>
<div class="ttc" id="agroup__odp__initialization_html_ga145c4fc4417c8f58efd0852b34e25ba9"><div class="ttname"><a href="group__odp__initialization.html#ga145c4fc4417c8f58efd0852b34e25ba9">odp_init_param_init</a></div><div class="ttdeci">void odp_init_param_init(odp_init_t *param)</div><div class="ttdoc">Initialize the odp_init_t to default values for all fields.</div></div>
<div class="ttc" id="agroup__odp__initialization_html_ga265470ea614bfeca9d8901e81ddefca9"><div class="ttname"><a href="group__odp__initialization.html#ga265470ea614bfeca9d8901e81ddefca9">odp_init_local</a></div><div class="ttdeci">int odp_init_local(odp_instance_t instance, odp_thread_type_t thr_type)</div><div class="ttdoc">Thread local ODP initialization.</div></div>
<div class="ttc" id="agroup__odp__initialization_html_ga68d81088e65ef66180fb51076905e34d"><div class="ttname"><a href="group__odp__initialization.html#ga68d81088e65ef66180fb51076905e34d">odp_init_global</a></div><div class="ttdeci">int odp_init_global(odp_instance_t *instance, const odp_init_t *params, const odp_platform_init_t *platform_params)</div><div class="ttdoc">Global ODP initialization.</div></div>
<div class="ttc" id="agroup__odp__initialization_html_ga6d15f0e1718da9477948dedb06a2f01a"><div class="ttname"><a href="group__odp__initialization.html#ga6d15f0e1718da9477948dedb06a2f01a">odp_term_local</a></div><div class="ttdeci">int odp_term_local(void)</div><div class="ttdoc">Thread local ODP termination.</div></div>
<div class="ttc" id="agroup__odp__initialization_html_ga87e9c66ad92201c9e0a710294eab1569"><div class="ttname"><a href="group__odp__initialization.html#ga87e9c66ad92201c9e0a710294eab1569">odp_term_global</a></div><div class="ttdeci">int odp_term_global(odp_instance_t instance)</div><div class="ttdoc">Global ODP termination.</div></div>
<div class="ttc" id="agroup__odp__initialization_html_ga8d362bd3c7c87ab5892ca63b15c375c0"><div class="ttname"><a href="group__odp__initialization.html#ga8d362bd3c7c87ab5892ca63b15c375c0">odp_instance_t</a></div><div class="ttdeci">uint64_t odp_instance_t</div><div class="ttdoc">ODP instance ID.</div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2init_8h_source.html#l00020">api/abi-default/init.h:20</a></div></div>
<div class="ttc" id="agroup__odp__packet_html_ga1f738db1a7ac6ffe4573195ff158d56e"><div class="ttname"><a href="group__odp__packet.html#ga1f738db1a7ac6ffe4573195ff158d56e">odp_packet_to_event</a></div><div class="ttdeci">odp_event_t odp_packet_to_event(odp_packet_t pkt)</div><div class="ttdoc">Convert packet handle to event.</div></div>
<div class="ttc" id="agroup__odp__packet_html_ga22a6d43d83393129dcd548194930bfcf"><div class="ttname"><a href="group__odp__packet.html#ga22a6d43d83393129dcd548194930bfcf">odp_packet_seg_len</a></div><div class="ttdeci">uint32_t odp_packet_seg_len(odp_packet_t pkt)</div><div class="ttdoc">Packet data length following the data pointer.</div></div>
<div class="ttc" id="agroup__odp__packet_html_ga433ba21e3c83c6d4d9831c9e732b63de"><div class="ttname"><a href="group__odp__packet.html#ga433ba21e3c83c6d4d9831c9e732b63de">odp_packet_data</a></div><div class="ttdeci">void * odp_packet_data(odp_packet_t pkt)</div><div class="ttdoc">Packet data pointer.</div></div>
<div class="ttc" id="agroup__odp__packet_html_ga7528dda77d71a9dbfe563dffb62d8318"><div class="ttname"><a href="group__odp__packet.html#ga7528dda77d71a9dbfe563dffb62d8318">odp_packet_alloc</a></div><div class="ttdeci">odp_packet_t odp_packet_alloc(odp_pool_t pool, uint32_t len)</div><div class="ttdoc">Allocate a packet from a packet pool.</div></div>
<div class="ttc" id="agroup__odp__packet_html_ga8605e7d4629a479f7b1a59da121c601c"><div class="ttname"><a href="group__odp__packet.html#ga8605e7d4629a479f7b1a59da121c601c">odp_packet_from_event</a></div><div class="ttdeci">odp_packet_t odp_packet_from_event(odp_event_t ev)</div><div class="ttdoc">Get packet handle from event.</div></div>
<div class="ttc" id="agroup__odp__packet_html_gaba8cf39480fb133ab8299155d4ef63dc"><div class="ttname"><a href="group__odp__packet.html#gaba8cf39480fb133ab8299155d4ef63dc">ODP_PACKET_INVALID</a></div><div class="ttdeci">#define ODP_PACKET_INVALID</div><div class="ttdoc">Invalid packet.</div></div>
<div class="ttc" id="agroup__odp__pool_html_ga256909a276600c25ce11b52ae274632f"><div class="ttname"><a href="group__odp__pool.html#ga256909a276600c25ce11b52ae274632f">odp_pool_create</a></div><div class="ttdeci">odp_pool_t odp_pool_create(const char *name, const odp_pool_param_t *param)</div><div class="ttdoc">Create a pool.</div></div>
<div class="ttc" id="agroup__odp__pool_html_ga2c6f42e9611904eac84872bf8f913b75"><div class="ttname"><a href="group__odp__pool.html#ga2c6f42e9611904eac84872bf8f913b75">odp_pool_capability</a></div><div class="ttdeci">int odp_pool_capability(odp_pool_capability_t *capa)</div><div class="ttdoc">Query pool capabilities.</div></div>
<div class="ttc" id="agroup__odp__pool_html_ga3dd8bcfb920f81142e9fe27cfba24073"><div class="ttname"><a href="group__odp__pool.html#ga3dd8bcfb920f81142e9fe27cfba24073">odp_pool_param_init</a></div><div class="ttdeci">void odp_pool_param_init(odp_pool_param_t *param)</div><div class="ttdoc">Initialize pool params.</div></div>
<div class="ttc" id="agroup__odp__pool_html_ga6ad439aaef911d82b972c915850e6924"><div class="ttname"><a href="group__odp__pool.html#ga6ad439aaef911d82b972c915850e6924">odp_pool_destroy</a></div><div class="ttdeci">int odp_pool_destroy(odp_pool_t pool)</div><div class="ttdoc">Destroy a pool previously created by odp_pool_create()</div></div>
<div class="ttc" id="agroup__odp__pool_html_gac47bb33bcde80614b4b358578eaa3082"><div class="ttname"><a href="group__odp__pool.html#gac47bb33bcde80614b4b358578eaa3082">odp_pool_type_t</a></div><div class="ttdeci">odp_pool_type_t</div><div class="ttdoc">Pool types.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2pool__types_8h_source.html#l00402">api/spec/pool_types.h:402</a></div></div>
<div class="ttc" id="agroup__odp__pool_html_gafca03b58412260da754042a92f8a5e04"><div class="ttname"><a href="group__odp__pool.html#gafca03b58412260da754042a92f8a5e04">ODP_POOL_INVALID</a></div><div class="ttdeci">#define ODP_POOL_INVALID</div><div class="ttdoc">Invalid pool.</div></div>
<div class="ttc" id="agroup__odp__pool_html_ggac47bb33bcde80614b4b358578eaa3082a5f851628c50a0c6a8ee896fd46767806"><div class="ttname"><a href="group__odp__pool.html#ggac47bb33bcde80614b4b358578eaa3082a5f851628c50a0c6a8ee896fd46767806">ODP_POOL_BUFFER</a></div><div class="ttdeci">@ ODP_POOL_BUFFER</div><div class="ttdoc">Buffer pool.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2pool__types_8h_source.html#l00407">api/spec/pool_types.h:407</a></div></div>
<div class="ttc" id="agroup__odp__pool_html_ggac47bb33bcde80614b4b358578eaa3082aa02b3a4e37094bd277b3dfe371450acd"><div class="ttname"><a href="group__odp__pool.html#ggac47bb33bcde80614b4b358578eaa3082aa02b3a4e37094bd277b3dfe371450acd">ODP_POOL_PACKET</a></div><div class="ttdeci">@ ODP_POOL_PACKET</div><div class="ttdoc">Packet pool.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2pool__types_8h_source.html#l00404">api/spec/pool_types.h:404</a></div></div>
<div class="ttc" id="agroup__odp__queue_html_ga5c003a7027eb97f12b263d674be853ae"><div class="ttname"><a href="group__odp__queue.html#ga5c003a7027eb97f12b263d674be853ae">odp_queue_context_set</a></div><div class="ttdeci">int odp_queue_context_set(odp_queue_t queue, void *context, uint32_t len)</div><div class="ttdoc">Set queue context.</div></div>
<div class="ttc" id="agroup__odp__queue_html_ga6b3ef7c0d52f9dd31e534b9cf17eb218"><div class="ttname"><a href="group__odp__queue.html#ga6b3ef7c0d52f9dd31e534b9cf17eb218">odp_queue_enq_multi</a></div><div class="ttdeci">int odp_queue_enq_multi(odp_queue_t queue, const odp_event_t events[], int num)</div><div class="ttdoc">Enqueue multiple events to a queue.</div></div>
<div class="ttc" id="agroup__odp__queue_html_ga6fc2ea5eb86152210342f7377d1468e4"><div class="ttname"><a href="group__odp__queue.html#ga6fc2ea5eb86152210342f7377d1468e4">odp_queue_param_init</a></div><div class="ttdeci">void odp_queue_param_init(odp_queue_param_t *param)</div><div class="ttdoc">Initialize queue params.</div></div>
<div class="ttc" id="agroup__odp__queue_html_ga771259a58e71e065e0d00d2fc431b014"><div class="ttname"><a href="group__odp__queue.html#ga771259a58e71e065e0d00d2fc431b014">ODP_QUEUE_INVALID</a></div><div class="ttdeci">#define ODP_QUEUE_INVALID</div><div class="ttdoc">Invalid queue.</div></div>
<div class="ttc" id="agroup__odp__queue_html_ga96ab88617101283b30ba784c9c9e7367"><div class="ttname"><a href="group__odp__queue.html#ga96ab88617101283b30ba784c9c9e7367">odp_queue_context</a></div><div class="ttdeci">void * odp_queue_context(odp_queue_t queue)</div><div class="ttdoc">Get queue context.</div></div>
<div class="ttc" id="agroup__odp__queue_html_ga985c2e5219f65c270b50578c16ec9d61"><div class="ttname"><a href="group__odp__queue.html#ga985c2e5219f65c270b50578c16ec9d61">odp_queue_enq</a></div><div class="ttdeci">int odp_queue_enq(odp_queue_t queue, odp_event_t ev)</div><div class="ttdoc">Enqueue an event to a queue.</div></div>
<div class="ttc" id="agroup__odp__queue_html_gaa9dcb65fb0e9f75360156b815dda528d"><div class="ttname"><a href="group__odp__queue.html#gaa9dcb65fb0e9f75360156b815dda528d">odp_queue_print_all</a></div><div class="ttdeci">void odp_queue_print_all(void)</div><div class="ttdoc">Print debug info about all queues.</div></div>
<div class="ttc" id="agroup__odp__queue_html_gab985be8c3947fef3da257e16948bf0f0"><div class="ttname"><a href="group__odp__queue.html#gab985be8c3947fef3da257e16948bf0f0">odp_queue_create</a></div><div class="ttdeci">odp_queue_t odp_queue_create(const char *name, const odp_queue_param_t *param)</div><div class="ttdoc">Queue create.</div></div>
<div class="ttc" id="agroup__odp__queue_html_gad1e1d2709808385025dd5f005f7690c4"><div class="ttname"><a href="group__odp__queue.html#gad1e1d2709808385025dd5f005f7690c4">odp_queue_destroy</a></div><div class="ttdeci">int odp_queue_destroy(odp_queue_t queue)</div><div class="ttdoc">Destroy ODP queue.</div></div>
<div class="ttc" id="agroup__odp__queue_html_gga89a3439d3f3be48cac1767cba721eddaa4f49ad2143a9ba8a5914573d2794e962"><div class="ttname"><a href="group__odp__queue.html#gga89a3439d3f3be48cac1767cba721eddaa4f49ad2143a9ba8a5914573d2794e962">ODP_QUEUE_TYPE_SCHED</a></div><div class="ttdeci">@ ODP_QUEUE_TYPE_SCHED</div><div class="ttdoc">Scheduled queue.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2queue__types_8h_source.html#l00056">api/spec/queue_types.h:55</a></div></div>
<div class="ttc" id="agroup__odp__scheduler_html_ga05c15f8076326b98fe2fc534dcc6b319"><div class="ttname"><a href="group__odp__scheduler.html#ga05c15f8076326b98fe2fc534dcc6b319">odp_schedule_sync_t</a></div><div class="ttdeci">int odp_schedule_sync_t</div><div class="ttdoc">Scheduler synchronization method.</div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2schedule__types_8h_source.html#l00029">api/abi-default/schedule_types.h:29</a></div></div>
<div class="ttc" id="agroup__odp__scheduler_html_ga2ba135fc660e1c050aa25ec6744ec584"><div class="ttname"><a href="group__odp__scheduler.html#ga2ba135fc660e1c050aa25ec6744ec584">ODP_SCHED_SYNC_PARALLEL</a></div><div class="ttdeci">#define ODP_SCHED_SYNC_PARALLEL</div><div class="ttdoc">Parallel scheduled queues.</div></div>
<div class="ttc" id="agroup__odp__scheduler_html_ga33e9d26217f2f689b2611298dec5daf7"><div class="ttname"><a href="group__odp__scheduler.html#ga33e9d26217f2f689b2611298dec5daf7">odp_schedule_prio_t</a></div><div class="ttdeci">int odp_schedule_prio_t</div><div class="ttdoc">Scheduling priority level.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2schedule__types_8h_source.html#l00174">api/spec/schedule_types.h:174</a></div></div>
<div class="ttc" id="agroup__odp__scheduler_html_ga34f1bae924466cc2b57563f8fe2dc0d1"><div class="ttname"><a href="group__odp__scheduler.html#ga34f1bae924466cc2b57563f8fe2dc0d1">odp_schedule_multi</a></div><div class="ttdeci">int odp_schedule_multi(odp_queue_t *from, uint64_t wait, odp_event_t events[], int num)</div><div class="ttdoc">Schedule multiple events.</div></div>
<div class="ttc" id="agroup__odp__scheduler_html_ga3cd27b316530d297eab83d851bf2deb8"><div class="ttname"><a href="group__odp__scheduler.html#ga3cd27b316530d297eab83d851bf2deb8">odp_schedule_group_t</a></div><div class="ttdeci">int odp_schedule_group_t</div><div class="ttdoc">Scheduler thread group.</div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2schedule__types_8h_source.html#l00035">api/abi-default/schedule_types.h:35</a></div></div>
<div class="ttc" id="agroup__odp__scheduler_html_ga3f3af33a2a42b3a9d6e5e3f74bfcb03d"><div class="ttname"><a href="group__odp__scheduler.html#ga3f3af33a2a42b3a9d6e5e3f74bfcb03d">odp_schedule_config_init</a></div><div class="ttdeci">void odp_schedule_config_init(odp_schedule_config_t *config)</div><div class="ttdoc">Initialize schedule configuration options.</div></div>
<div class="ttc" id="agroup__odp__scheduler_html_ga3f7a7ab39ee69f8538edd9dd506127b6"><div class="ttname"><a href="group__odp__scheduler.html#ga3f7a7ab39ee69f8538edd9dd506127b6">odp_schedule_group_join</a></div><div class="ttdeci">int odp_schedule_group_join(odp_schedule_group_t group, const odp_thrmask_t *mask)</div><div class="ttdoc">Join a schedule group.</div></div>
<div class="ttc" id="agroup__odp__scheduler_html_ga4b7efc5cfc27ef416312f5adb8bdc392"><div class="ttname"><a href="group__odp__scheduler.html#ga4b7efc5cfc27ef416312f5adb8bdc392">ODP_SCHED_SYNC_ATOMIC</a></div><div class="ttdeci">#define ODP_SCHED_SYNC_ATOMIC</div><div class="ttdoc">Atomic queue synchronization.</div></div>
<div class="ttc" id="agroup__odp__scheduler_html_ga4df3696ebf4528ecc6e69ae3fff040fd"><div class="ttname"><a href="group__odp__scheduler.html#ga4df3696ebf4528ecc6e69ae3fff040fd">ODP_SCHED_SYNC_ORDERED</a></div><div class="ttdeci">#define ODP_SCHED_SYNC_ORDERED</div><div class="ttdoc">Ordered queue synchronization.</div></div>
<div class="ttc" id="agroup__odp__scheduler_html_ga53b421f0656421e67cc7fd841e5576b5"><div class="ttname"><a href="group__odp__scheduler.html#ga53b421f0656421e67cc7fd841e5576b5">odp_schedule_min_prio</a></div><div class="ttdeci">int odp_schedule_min_prio(void)</div><div class="ttdoc">Minimum scheduling priority level.</div></div>
<div class="ttc" id="agroup__odp__scheduler_html_ga72125b596aa5d2e61dd61e177516e24e"><div class="ttname"><a href="group__odp__scheduler.html#ga72125b596aa5d2e61dd61e177516e24e">ODP_SCHED_GROUP_WORKER</a></div><div class="ttdeci">#define ODP_SCHED_GROUP_WORKER</div><div class="ttdoc">Group of all worker threads.</div></div>
<div class="ttc" id="agroup__odp__scheduler_html_ga789089301ab1da404d927deace0c2492"><div class="ttname"><a href="group__odp__scheduler.html#ga789089301ab1da404d927deace0c2492">odp_schedule_group_destroy</a></div><div class="ttdeci">int odp_schedule_group_destroy(odp_schedule_group_t group)</div><div class="ttdoc">Schedule group destroy.</div></div>
<div class="ttc" id="agroup__odp__scheduler_html_ga8a6ab4ff9386d9a4ffcb4b19d516a3fb"><div class="ttname"><a href="group__odp__scheduler.html#ga8a6ab4ff9386d9a4ffcb4b19d516a3fb">ODP_SCHED_GROUP_INVALID</a></div><div class="ttdeci">#define ODP_SCHED_GROUP_INVALID</div><div class="ttdoc">Invalid scheduler group.</div></div>
<div class="ttc" id="agroup__odp__scheduler_html_ga9116776b8262a74af7dac7ef46fc7ace"><div class="ttname"><a href="group__odp__scheduler.html#ga9116776b8262a74af7dac7ef46fc7ace">ODP_SCHED_NO_WAIT</a></div><div class="ttdeci">#define ODP_SCHED_NO_WAIT</div><div class="ttdoc">Do not wait.</div></div>
<div class="ttc" id="agroup__odp__scheduler_html_ga94034a7f591f3f549099aebb098f7e05"><div class="ttname"><a href="group__odp__scheduler.html#ga94034a7f591f3f549099aebb098f7e05">odp_schedule_default_prio</a></div><div class="ttdeci">int odp_schedule_default_prio(void)</div><div class="ttdoc">Default scheduling priority level.</div></div>
<div class="ttc" id="agroup__odp__scheduler_html_ga9868ccb25b6631ef29cc921ee2e522b0"><div class="ttname"><a href="group__odp__scheduler.html#ga9868ccb25b6631ef29cc921ee2e522b0">odp_schedule_pause</a></div><div class="ttdeci">void odp_schedule_pause(void)</div><div class="ttdoc">Pause scheduling.</div></div>
<div class="ttc" id="agroup__odp__scheduler_html_ga9d91b9144cf2ccdcb112b7376a38aeaf"><div class="ttname"><a href="group__odp__scheduler.html#ga9d91b9144cf2ccdcb112b7376a38aeaf">odp_schedule_max_prio</a></div><div class="ttdeci">int odp_schedule_max_prio(void)</div><div class="ttdoc">Maximum scheduling priority level.</div></div>
<div class="ttc" id="agroup__odp__scheduler_html_gaa1b51ebd46adeb6aa7805fccb00144df"><div class="ttname"><a href="group__odp__scheduler.html#gaa1b51ebd46adeb6aa7805fccb00144df">odp_schedule_config</a></div><div class="ttdeci">int odp_schedule_config(const odp_schedule_config_t *config)</div><div class="ttdoc">Global schedule configuration.</div></div>
<div class="ttc" id="agroup__odp__scheduler_html_gab0a0d2673cc7371d5c5d782d13a485b8"><div class="ttname"><a href="group__odp__scheduler.html#gab0a0d2673cc7371d5c5d782d13a485b8">odp_schedule_wait_time</a></div><div class="ttdeci">uint64_t odp_schedule_wait_time(uint64_t ns)</div><div class="ttdoc">Schedule wait time.</div></div>
<div class="ttc" id="agroup__odp__scheduler_html_gabde3ebecd35c0442a2e2a20144af0d80"><div class="ttname"><a href="group__odp__scheduler.html#gabde3ebecd35c0442a2e2a20144af0d80">odp_schedule_capability</a></div><div class="ttdeci">int odp_schedule_capability(odp_schedule_capability_t *capa)</div><div class="ttdoc">Query scheduler capabilities.</div></div>
<div class="ttc" id="agroup__odp__scheduler_html_gade17d812771d4e386aac0810b05fa0e5"><div class="ttname"><a href="group__odp__scheduler.html#gade17d812771d4e386aac0810b05fa0e5">odp_schedule_group_create</a></div><div class="ttdeci">odp_schedule_group_t odp_schedule_group_create(const char *name, const odp_thrmask_t *mask)</div><div class="ttdoc">Schedule group create.</div></div>
<div class="ttc" id="agroup__odp__scheduler_html_gae4ca1012ebb16ff8b9752b958dc45ce6"><div class="ttname"><a href="group__odp__scheduler.html#gae4ca1012ebb16ff8b9752b958dc45ce6">odp_schedule</a></div><div class="ttdeci">odp_event_t odp_schedule(odp_queue_t *from, uint64_t wait)</div><div class="ttdoc">Schedule an event.</div></div>
<div class="ttc" id="agroup__odp__scheduler_html_gae92168433885df11eed3d22040b68e38"><div class="ttname"><a href="group__odp__scheduler.html#gae92168433885df11eed3d22040b68e38">odp_schedule_print</a></div><div class="ttdeci">void odp_schedule_print(void)</div><div class="ttdoc">Print debug info about scheduler.</div></div>
<div class="ttc" id="agroup__odp__scheduler_html_gaf463b15ad978dac0bf77c0110232b504"><div class="ttname"><a href="group__odp__scheduler.html#gaf463b15ad978dac0bf77c0110232b504">ODP_SCHED_GROUP_ALL</a></div><div class="ttdeci">#define ODP_SCHED_GROUP_ALL</div><div class="ttdoc">Group of all threads.</div></div>
<div class="ttc" id="agroup__odp__shared__memory_html_ga0257a416aacd98f9a25dd0685518c553"><div class="ttname"><a href="group__odp__shared__memory.html#ga0257a416aacd98f9a25dd0685518c553">odp_shm_print_all</a></div><div class="ttdeci">void odp_shm_print_all(void)</div><div class="ttdoc">Print all shared memory blocks.</div></div>
<div class="ttc" id="agroup__odp__shared__memory_html_ga0b02991b512acc119206b44c95a86ed6"><div class="ttname"><a href="group__odp__shared__memory.html#ga0b02991b512acc119206b44c95a86ed6">odp_shm_free</a></div><div class="ttdeci">int odp_shm_free(odp_shm_t shm)</div><div class="ttdoc">Free a contiguous block of shared memory.</div></div>
<div class="ttc" id="agroup__odp__shared__memory_html_ga6e4289975efc279bb9f31880613a9d60"><div class="ttname"><a href="group__odp__shared__memory.html#ga6e4289975efc279bb9f31880613a9d60">ODP_SHM_INVALID</a></div><div class="ttdeci">#define ODP_SHM_INVALID</div><div class="ttdoc">Invalid shared memory block.</div></div>
<div class="ttc" id="agroup__odp__shared__memory_html_gac94c4232f7cd64039bbaef601ff2c05e"><div class="ttname"><a href="group__odp__shared__memory.html#gac94c4232f7cd64039bbaef601ff2c05e">odp_shm_addr</a></div><div class="ttdeci">void * odp_shm_addr(odp_shm_t shm)</div><div class="ttdoc">Shared memory block address.</div></div>
<div class="ttc" id="agroup__odp__shared__memory_html_gacc441b0e100ec1c54e21f1745939a2d8"><div class="ttname"><a href="group__odp__shared__memory.html#gacc441b0e100ec1c54e21f1745939a2d8">odp_shm_reserve</a></div><div class="ttdeci">odp_shm_t odp_shm_reserve(const char *name, uint64_t size, uint64_t align, uint32_t flags)</div><div class="ttdoc">Reserve a contiguous block of shared memory.</div></div>
<div class="ttc" id="agroup__odp__system_html_gab0a1cd5e503d5ec067e8d17d228b937d"><div class="ttname"><a href="group__odp__system.html#gab0a1cd5e503d5ec067e8d17d228b937d">odp_sys_info_print</a></div><div class="ttdeci">void odp_sys_info_print(void)</div><div class="ttdoc">Print system info.</div></div>
<div class="ttc" id="agroup__odp__thread_html_ga0c7b70f32643b51e1ea09352183c50bf"><div class="ttname"><a href="group__odp__thread.html#ga0c7b70f32643b51e1ea09352183c50bf">ODP_THREAD_COUNT_MAX</a></div><div class="ttdeci">#define ODP_THREAD_COUNT_MAX</div><div class="ttdoc">Maximum number of threads supported in build time.</div></div>
<div class="ttc" id="agroup__odp__thread_html_ga89b0cb677eb6a08fc84ef0afa3667419"><div class="ttname"><a href="group__odp__thread.html#ga89b0cb677eb6a08fc84ef0afa3667419">odp_thrmask_set</a></div><div class="ttdeci">void odp_thrmask_set(odp_thrmask_t *mask, int thr)</div><div class="ttdoc">Add thread to mask.</div></div>
<div class="ttc" id="agroup__odp__thread_html_gad6562e7320d48463715bbf15748ae360"><div class="ttname"><a href="group__odp__thread.html#gad6562e7320d48463715bbf15748ae360">odp_thread_id</a></div><div class="ttdeci">int odp_thread_id(void)</div><div class="ttdoc">Get thread identifier.</div></div>
<div class="ttc" id="agroup__odp__thread_html_gaf1d55ea5d614754bd1de40229314869f"><div class="ttname"><a href="group__odp__thread.html#gaf1d55ea5d614754bd1de40229314869f">odp_thrmask_zero</a></div><div class="ttdeci">void odp_thrmask_zero(odp_thrmask_t *mask)</div><div class="ttdoc">Clear entire thread mask.</div></div>
<div class="ttc" id="agroup__odp__thread_html_ggafc7a7c180de9811d71b7cb050713bf53a2182066d714db5f2a4e994ad92f25b2a"><div class="ttname"><a href="group__odp__thread.html#ggafc7a7c180de9811d71b7cb050713bf53a2182066d714db5f2a4e994ad92f25b2a">ODP_THREAD_WORKER</a></div><div class="ttdeci">@ ODP_THREAD_WORKER</div><div class="ttdoc">Worker thread.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2thread__types_8h_source.html#l00042">api/spec/thread_types.h:42</a></div></div>
<div class="ttc" id="agroup__odp__thread_html_ggafc7a7c180de9811d71b7cb050713bf53a9aab3fdb10eb2000a864bff81f23c00a"><div class="ttname"><a href="group__odp__thread.html#ggafc7a7c180de9811d71b7cb050713bf53a9aab3fdb10eb2000a864bff81f23c00a">ODP_THREAD_CONTROL</a></div><div class="ttdeci">@ ODP_THREAD_CONTROL</div><div class="ttdoc">Control thread.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2thread__types_8h_source.html#l00054">api/spec/thread_types.h:53</a></div></div>
<div class="ttc" id="agroup__odp__time_html_ga506b0234dfdd7c0dc98d6acd27d57f8a"><div class="ttname"><a href="group__odp__time.html#ga506b0234dfdd7c0dc98d6acd27d57f8a">odp_time_wait_ns</a></div><div class="ttdeci">void odp_time_wait_ns(uint64_t ns)</div><div class="ttdoc">Wait the specified number of nanoseconds.</div></div>
<div class="ttc" id="agroup__odp__time_html_ga5d0b24d7dae739bac7585ed515bd60a8"><div class="ttname"><a href="group__odp__time.html#ga5d0b24d7dae739bac7585ed515bd60a8">odp_time_local</a></div><div class="ttdeci">odp_time_t odp_time_local(void)</div><div class="ttdoc">Current local time.</div></div>
<div class="ttc" id="agroup__odp__time_html_gabad65a44847cb6d46c2ae9cc96a80a4c"><div class="ttname"><a href="group__odp__time.html#gabad65a44847cb6d46c2ae9cc96a80a4c">ODP_TIME_MSEC_IN_NS</a></div><div class="ttdeci">#define ODP_TIME_MSEC_IN_NS</div><div class="ttdoc">A millisecond in nanoseconds.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2time__types_8h_source.html#l00028">api/spec/time_types.h:28</a></div></div>
<div class="ttc" id="agroup__odp__time_html_gada453827b812a8fae651e9d93308e959"><div class="ttname"><a href="group__odp__time.html#gada453827b812a8fae651e9d93308e959">odp_time_diff_ns</a></div><div class="ttdeci">uint64_t odp_time_diff_ns(odp_time_t t2, odp_time_t t1)</div><div class="ttdoc">Time difference in nanoseconds.</div></div>
<div class="ttc" id="aodp__api_8h_html"><div class="ttname"><a href="odp__api_8h.html">odp_api.h</a></div><div class="ttdoc">The OpenDataPlane API.</div></div>
<div class="ttc" id="astruct__odp__abi__buffer__t_html"><div class="ttname"><a href="struct__odp__abi__buffer__t.html">_odp_abi_buffer_t</a></div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2buffer__types_8h_source.html#l00014">api/abi-default/buffer_types.h:14</a></div></div>
<div class="ttc" id="astruct__odp__abi__event__t_html"><div class="ttname"><a href="struct__odp__abi__event__t.html">_odp_abi_event_t</a></div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2event__types_8h_source.html#l00016">api/abi-default/event_types.h:16</a></div></div>
<div class="ttc" id="astruct__odp__abi__packet__t_html"><div class="ttname"><a href="struct__odp__abi__packet__t.html">_odp_abi_packet_t</a></div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2packet__types_8h_source.html#l00016">api/abi-default/packet_types.h:16</a></div></div>
<div class="ttc" id="astruct__odp__abi__pool__t_html"><div class="ttname"><a href="struct__odp__abi__pool__t.html">_odp_abi_pool_t</a></div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2pool__types_8h_source.html#l00014">api/abi-default/pool_types.h:14</a></div></div>
<div class="ttc" id="astruct__odp__abi__queue__t_html"><div class="ttname"><a href="struct__odp__abi__queue__t.html">_odp_abi_queue_t</a></div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2queue__types_8h_source.html#l00014">api/abi-default/queue_types.h:14</a></div></div>
<div class="ttc" id="astruct__odp__abi__shm__t_html"><div class="ttname"><a href="struct__odp__abi__shm__t.html">_odp_abi_shm_t</a></div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2shared__memory_8h_source.html#l00013">api/abi-default/shared_memory.h:13</a></div></div>
<div class="ttc" id="astructodp__atomic__u32__s_html"><div class="ttname"><a href="structodp__atomic__u32__s.html">odp_atomic_u32_s</a></div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2atomic_8h_source.html#l00026">api/abi-default/atomic.h:26</a></div></div>
<div class="ttc" id="astructodp__atomic__u64__s_html"><div class="ttname"><a href="structodp__atomic__u64__s.html">odp_atomic_u64_s</a></div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2atomic_8h_source.html#l00052">api/abi-default/atomic.h:52</a></div></div>
<div class="ttc" id="astructodp__barrier__s_html"><div class="ttname"><a href="structodp__barrier__s.html">odp_barrier_s</a></div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2barrier_8h_source.html#l00025">api/abi-default/barrier.h:25</a></div></div>
<div class="ttc" id="astructodp__cpumask__t_html"><div class="ttname"><a href="structodp__cpumask__t.html">odp_cpumask_t</a></div><div class="ttdoc">CPU mask.</div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2cpumask_8h_source.html#l00035">api/abi-default/cpumask.h:35</a></div></div>
<div class="ttc" id="astructodp__init__t_html"><div class="ttname"><a href="structodp__init__t.html">odp_init_t</a></div><div class="ttdoc">Global initialization parameters.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2init_8h_source.html#l00161">api/spec/init.h:161</a></div></div>
<div class="ttc" id="astructodp__init__t_html_a7d368c740146170ebeb1651ce049919e"><div class="ttname"><a href="structodp__init__t.html#a7d368c740146170ebeb1651ce049919e">odp_init_t::mem_model</a></div><div class="ttdeci">odp_mem_model_t mem_model</div><div class="ttdoc">Application memory model.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2init_8h_source.html#l00218">api/spec/init.h:218</a></div></div>
<div class="ttc" id="astructodp__init__t_html_aa359196a1801c0ca15a88af32de71d46"><div class="ttname"><a href="structodp__init__t.html#aa359196a1801c0ca15a88af32de71d46">odp_init_t::not_used</a></div><div class="ttdeci">odp_feature_t not_used</div><div class="ttdoc">Unused features.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2init_8h_source.html#l00212">api/spec/init.h:212</a></div></div>
<div class="ttc" id="astructodp__pool__capability__t_html"><div class="ttname"><a href="structodp__pool__capability__t.html">odp_pool_capability_t</a></div><div class="ttdoc">Pool capabilities.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2pool__types_8h_source.html#l00184">api/spec/pool_types.h:184</a></div></div>
<div class="ttc" id="astructodp__pool__capability__t_html_a07646ccbb83bd16b8e2b0f6f83e6f7c0"><div class="ttname"><a href="structodp__pool__capability__t.html#a07646ccbb83bd16b8e2b0f6f83e6f7c0">odp_pool_capability_t::buf</a></div><div class="ttdeci">struct odp_pool_capability_t::@118 buf</div><div class="ttdoc">Buffer pool capabilities</div></div>
<div class="ttc" id="astructodp__pool__capability__t_html_a2b468c5617515bbd5d50a57a7d65e1e0"><div class="ttname"><a href="structodp__pool__capability__t.html#a2b468c5617515bbd5d50a57a7d65e1e0">odp_pool_capability_t::max_num</a></div><div class="ttdeci">uint32_t max_num</div><div class="ttdoc">Maximum number of buffers of any size.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2pool__types_8h_source.html#l00206">api/spec/pool_types.h:206</a></div></div>
<div class="ttc" id="astructodp__pool__capability__t_html_a69c99e04be730e2b11c92fec0d5234f2"><div class="ttname"><a href="structodp__pool__capability__t.html#a69c99e04be730e2b11c92fec0d5234f2">odp_pool_capability_t::max_uarea_size</a></div><div class="ttdeci">uint32_t max_uarea_size</div><div class="ttdoc">Maximum user area size in bytes.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2pool__types_8h_source.html#l00209">api/spec/pool_types.h:209</a></div></div>
<div class="ttc" id="astructodp__pool__capability__t_html_a72dedc1c84be84133a0a1553c76853ff"><div class="ttname"><a href="structodp__pool__capability__t.html#a72dedc1c84be84133a0a1553c76853ff">odp_pool_capability_t::max_size</a></div><div class="ttdeci">uint32_t max_size</div><div class="ttdoc">Maximum buffer data size in bytes.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2pool__types_8h_source.html#l00200">api/spec/pool_types.h:200</a></div></div>
<div class="ttc" id="astructodp__pool__capability__t_html_abf8104f5420ff9c12c13258274c229cc"><div class="ttname"><a href="structodp__pool__capability__t.html#abf8104f5420ff9c12c13258274c229cc">odp_pool_capability_t::pkt</a></div><div class="ttdeci">struct odp_pool_capability_t::@119 pkt</div><div class="ttdoc">Packet pool capabilities</div></div>
<div class="ttc" id="astructodp__pool__capability__t_html_af4fa3242b2a25c4512acead54a5b7b88"><div class="ttname"><a href="structodp__pool__capability__t.html#af4fa3242b2a25c4512acead54a5b7b88">odp_pool_capability_t::max_seg_len</a></div><div class="ttdeci">uint32_t max_seg_len</div><div class="ttdoc">Maximum packet segment data length in bytes.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2pool__types_8h_source.html#l00298">api/spec/pool_types.h:298</a></div></div>
<div class="ttc" id="astructodp__pool__param__t_html"><div class="ttname"><a href="structodp__pool__param__t.html">odp_pool_param_t</a></div><div class="ttdoc">Pool parameters.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2pool__types_8h_source.html#l00431">api/spec/pool_types.h:431</a></div></div>
<div class="ttc" id="astructodp__pool__param__t_html_a07f656f3afc9bc0212441bf6916d700e"><div class="ttname"><a href="structodp__pool__param__t.html#a07f656f3afc9bc0212441bf6916d700e">odp_pool_param_t::uarea_size</a></div><div class="ttdeci">uint32_t uarea_size</div><div class="ttdoc">Minimum user area size in bytes.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2pool__types_8h_source.html#l00457">api/spec/pool_types.h:457</a></div></div>
<div class="ttc" id="astructodp__pool__param__t_html_a3598b3a2496629cd45010c1c5e876250"><div class="ttname"><a href="structodp__pool__param__t.html#a3598b3a2496629cd45010c1c5e876250">odp_pool_param_t::num</a></div><div class="ttdeci">uint32_t num</div><div class="ttdoc">Number of buffers in the pool.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2pool__types_8h_source.html#l00438">api/spec/pool_types.h:438</a></div></div>
<div class="ttc" id="astructodp__pool__param__t_html_a406965a15af2f21e4708b6afb0b5bfd5"><div class="ttname"><a href="structodp__pool__param__t.html#a406965a15af2f21e4708b6afb0b5bfd5">odp_pool_param_t::buf</a></div><div class="ttdeci">struct odp_pool_param_t::@122 buf</div><div class="ttdoc">Parameters for buffer pools.</div></div>
<div class="ttc" id="astructodp__pool__param__t_html_a594fe99ec16c3e62e08851f955567b0e"><div class="ttname"><a href="structodp__pool__param__t.html#a594fe99ec16c3e62e08851f955567b0e">odp_pool_param_t::align</a></div><div class="ttdeci">uint32_t align</div><div class="ttdoc">Minimum buffer alignment in bytes.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2pool__types_8h_source.html#l00451">api/spec/pool_types.h:451</a></div></div>
<div class="ttc" id="astructodp__pool__param__t_html_aa11286791288fff8f292caae1fc62002"><div class="ttname"><a href="structodp__pool__param__t.html#aa11286791288fff8f292caae1fc62002">odp_pool_param_t::size</a></div><div class="ttdeci">uint32_t size</div><div class="ttdoc">Minimum buffer size in bytes.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2pool__types_8h_source.html#l00445">api/spec/pool_types.h:445</a></div></div>
<div class="ttc" id="astructodp__pool__param__t_html_aac72ae142dd9736a287ce63d78b71c87"><div class="ttname"><a href="structodp__pool__param__t.html#aac72ae142dd9736a287ce63d78b71c87">odp_pool_param_t::type</a></div><div class="ttdeci">odp_pool_type_t type</div><div class="ttdoc">Pool type.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2pool__types_8h_source.html#l00433">api/spec/pool_types.h:433</a></div></div>
<div class="ttc" id="astructodp__pool__param__t_html_ab81d63235f8c63acc9c72cf2625afbd5"><div class="ttname"><a href="structodp__pool__param__t.html#ab81d63235f8c63acc9c72cf2625afbd5">odp_pool_param_t::pkt</a></div><div class="ttdeci">struct odp_pool_param_t::@123 pkt</div><div class="ttdoc">Parameters for packet pools.</div></div>
<div class="ttc" id="astructodp__pool__param__t_html_ac1ccfa50466f4afa9a9ab72f0bd315bf"><div class="ttname"><a href="structodp__pool__param__t.html#ac1ccfa50466f4afa9a9ab72f0bd315bf">odp_pool_param_t::len</a></div><div class="ttdeci">uint32_t len</div><div class="ttdoc">Minimum length of 'num' packets.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2pool__types_8h_source.html#l00505">api/spec/pool_types.h:505</a></div></div>
<div class="ttc" id="astructodp__pool__param__t_html_ad400db5955445ee3d1fbb36df456e7f1"><div class="ttname"><a href="structodp__pool__param__t.html#ad400db5955445ee3d1fbb36df456e7f1">odp_pool_param_t::seg_len</a></div><div class="ttdeci">uint32_t seg_len</div><div class="ttdoc">Minimum number of packet data bytes that can be stored in the first segment of a newly allocated pack...</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2pool__types_8h_source.html#l00531">api/spec/pool_types.h:531</a></div></div>
<div class="ttc" id="astructodp__queue__param__t_html"><div class="ttname"><a href="structodp__queue__param__t.html">odp_queue_param_t</a></div><div class="ttdoc">ODP Queue parameters.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2queue__types_8h_source.html#l00224">api/spec/queue_types.h:224</a></div></div>
<div class="ttc" id="astructodp__queue__param__t_html_a371701df4d20cee95978b9265c232e32"><div class="ttname"><a href="structodp__queue__param__t.html#a371701df4d20cee95978b9265c232e32">odp_queue_param_t::sched</a></div><div class="ttdeci">odp_schedule_param_t sched</div><div class="ttdoc">Scheduler parameters.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2queue__types_8h_source.html#l00255">api/spec/queue_types.h:255</a></div></div>
<div class="ttc" id="astructodp__queue__param__t_html_a5f045dbc199867e8ff2d23c617603b4e"><div class="ttname"><a href="structodp__queue__param__t.html#a5f045dbc199867e8ff2d23c617603b4e">odp_queue_param_t::size</a></div><div class="ttdeci">uint32_t size</div><div class="ttdoc">Queue size.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2queue__types_8h_source.html#l00292">api/spec/queue_types.h:292</a></div></div>
<div class="ttc" id="astructodp__queue__param__t_html_a6a7251138773a3110bdc0e8d5f5b3be9"><div class="ttname"><a href="structodp__queue__param__t.html#a6a7251138773a3110bdc0e8d5f5b3be9">odp_queue_param_t::type</a></div><div class="ttdeci">odp_queue_type_t type</div><div class="ttdoc">Queue type.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2queue__types_8h_source.html#l00229">api/spec/queue_types.h:229</a></div></div>
<div class="ttc" id="astructodp__schedule__capability__t_html"><div class="ttname"><a href="structodp__schedule__capability__t.html">odp_schedule_capability_t</a></div><div class="ttdoc">Scheduler capabilities.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2schedule__types_8h_source.html#l00202">api/spec/schedule_types.h:202</a></div></div>
<div class="ttc" id="astructodp__schedule__capability__t_html_a15ee50c62bfa7da7fc3f307f872a5a44"><div class="ttname"><a href="structodp__schedule__capability__t.html#a15ee50c62bfa7da7fc3f307f872a5a44">odp_schedule_capability_t::max_groups</a></div><div class="ttdeci">uint32_t max_groups</div><div class="ttdoc">Maximum number of scheduling groups.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2schedule__types_8h_source.html#l00210">api/spec/schedule_types.h:210</a></div></div>
<div class="ttc" id="astructodp__schedule__config__t_html"><div class="ttname"><a href="structodp__schedule__config__t.html">odp_schedule_config_t</a></div><div class="ttdoc">Schedule configuration.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2schedule__types_8h_source.html#l00250">api/spec/schedule_types.h:250</a></div></div>
<div class="ttc" id="astructodp__schedule__param__t_html_a0bc7830a919f31ce295a20c51a7e2648"><div class="ttname"><a href="structodp__schedule__param__t.html#a0bc7830a919f31ce295a20c51a7e2648">odp_schedule_param_t::group</a></div><div class="ttdeci">odp_schedule_group_t group</div><div class="ttdoc">Thread group.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2schedule__types_8h_source.html#l00191">api/spec/schedule_types.h:191</a></div></div>
<div class="ttc" id="astructodp__schedule__param__t_html_a3f103771c3a9319c1ec998fa8724b8ac"><div class="ttname"><a href="structodp__schedule__param__t.html#a3f103771c3a9319c1ec998fa8724b8ac">odp_schedule_param_t::prio</a></div><div class="ttdeci">odp_schedule_prio_t prio</div><div class="ttdoc">Priority level.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2schedule__types_8h_source.html#l00181">api/spec/schedule_types.h:181</a></div></div>
<div class="ttc" id="astructodp__schedule__param__t_html_ad4ca09d63edb0cec36567c26688cea14"><div class="ttname"><a href="structodp__schedule__param__t.html#ad4ca09d63edb0cec36567c26688cea14">odp_schedule_param_t::sync</a></div><div class="ttdeci">odp_schedule_sync_t sync</div><div class="ttdoc">Synchronization method.</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2schedule__types_8h_source.html#l00186">api/spec/schedule_types.h:186</a></div></div>
<div class="ttc" id="astructodp__thrmask__t_html"><div class="ttname"><a href="structodp__thrmask__t.html">odp_thrmask_t</a></div><div class="ttdoc">Thread mask.</div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2thrmask_8h_source.html#l00034">api/abi-default/thrmask.h:34</a></div></div>
<div class="ttc" id="astructodp__time__t_html"><div class="ttname"><a href="structodp__time__t.html">odp_time_t</a></div><div class="ttdef"><b>Definition:</b> <a href="api_2abi-default_2time__types_8h_source.html#l00022">api/abi-default/time_types.h:22</a></div></div>
<div class="ttc" id="aunionodp__feature__t_html_a0e52579082f2f9874c343d01f30822da"><div class="ttname"><a href="unionodp__feature__t.html#a0e52579082f2f9874c343d01f30822da">odp_feature_t::feat</a></div><div class="ttdeci">struct odp_feature_t::@145 feat</div><div class="ttdoc">Individual feature bits.</div></div>
<div class="ttc" id="aunionodp__feature__t_html_a1314788ea1f1ed5880993df313efa537"><div class="ttname"><a href="unionodp__feature__t.html#a1314788ea1f1ed5880993df313efa537">odp_feature_t::tm</a></div><div class="ttdeci">uint32_t tm</div><div class="ttdoc">Traffic Manager APIs, e.g., odp_tm_xxx()</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2std__types_8h_source.html#l00157">api/spec/std_types.h:157</a></div></div>
<div class="ttc" id="aunionodp__feature__t_html_a1bdda287098ded64503078051a83f926"><div class="ttname"><a href="unionodp__feature__t.html#a1bdda287098ded64503078051a83f926">odp_feature_t::crypto</a></div><div class="ttdeci">uint32_t crypto</div><div class="ttdoc">Crypto APIs, e.g., odp_crypto_xxx()</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2std__types_8h_source.html#l00133">api/spec/std_types.h:133</a></div></div>
<div class="ttc" id="aunionodp__feature__t_html_a2c1ba6ec10b80be331770a6d1343c022"><div class="ttname"><a href="unionodp__feature__t.html#a2c1ba6ec10b80be331770a6d1343c022">odp_feature_t::ipsec</a></div><div class="ttdeci">uint32_t ipsec</div><div class="ttdoc">IPsec APIs, e.g., odp_ipsec_xxx()</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2std__types_8h_source.html#l00139">api/spec/std_types.h:139</a></div></div>
<div class="ttc" id="aunionodp__feature__t_html_a8385b58720b831b5c74ed0caf2e81ce0"><div class="ttname"><a href="unionodp__feature__t.html#a8385b58720b831b5c74ed0caf2e81ce0">odp_feature_t::timer</a></div><div class="ttdeci">uint32_t timer</div><div class="ttdoc">Timer APIs, e.g., odp_timer_xxx(), odp_timeout_xxx()</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2std__types_8h_source.html#l00154">api/spec/std_types.h:154</a></div></div>
<div class="ttc" id="aunionodp__feature__t_html_a88403beab239078f0b99ced6a9e55a8b"><div class="ttname"><a href="unionodp__feature__t.html#a88403beab239078f0b99ced6a9e55a8b">odp_feature_t::cls</a></div><div class="ttdeci">uint32_t cls</div><div class="ttdoc">Classifier APIs, e.g., odp_cls_xxx(), odp_cos_xxx()</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2std__types_8h_source.html#l00127">api/spec/std_types.h:127</a></div></div>
<div class="ttc" id="aunionodp__feature__t_html_afa5de6ea31695f0c1fd33773612aefcc"><div class="ttname"><a href="unionodp__feature__t.html#afa5de6ea31695f0c1fd33773612aefcc">odp_feature_t::compress</a></div><div class="ttdeci">uint32_t compress</div><div class="ttdoc">Compression APIs, e.g., odp_comp_xxx()</div><div class="ttdef"><b>Definition:</b> <a href="api_2spec_2std__types_8h_source.html#l00130">api/spec/std_types.h:130</a></div></div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
